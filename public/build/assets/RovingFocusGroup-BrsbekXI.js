import{d as A,b as P,o as O,e as F,M as N,u as w,a5 as $,a$ as k,r as p,c as C,aa as L,b0 as V,b1 as j,a6 as G,b2 as K,b3 as y,b4 as R,w as z,af as _,a8 as Y,ai as H,aj as q,f as W}from"./app-0hD9jktS.js";const re=A({__name:"VisuallyHidden",props:{feature:{default:"focusable"},asChild:{type:Boolean},as:{default:"span"}},setup(e){return(t,n)=>(O(),P(w($),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:F(()=>[N(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}});function J(e){const t=k({dir:p("ltr")});return C(()=>{var n;return(e==null?void 0:e.value)||((n=t.dir)==null?void 0:n.value)||"ltr"})}function M(){const e=p(),t=C(()=>{var n,o;return["#text","#comment"].includes((n=e.value)==null?void 0:n.$el.nodeName)?(o=e.value)==null?void 0:o.$el.nextElementSibling:L(e)});return{primitiveElement:e,currentElement:t}}const x="data-reka-collection-item";function Q(e={}){const{key:t="",isProvider:n=!1}=e,o=`${t}CollectionProvider`;let a;if(n){const s=p(new Map);a={collectionRef:p(),itemMap:s},V(o,a)}else a=j(o);const I=(s=!1)=>{const r=a.collectionRef.value;if(!r)return[];const i=Array.from(r.querySelectorAll(`[${x}]`)),c=Array.from(a.itemMap.value.values()).sort((d,v)=>i.indexOf(d.ref)-i.indexOf(v.ref));return s?c:c.filter(d=>d.ref.dataset.disabled!=="")},g=A({name:"CollectionSlot",setup(s,{slots:r}){const{primitiveElement:i,currentElement:u}=M();return z(u,()=>{a.collectionRef.value=u.value}),()=>y(R,{ref:i},r)}}),S=A({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(s,{slots:r,attrs:i}){const{primitiveElement:u,currentElement:c}=M();return G(d=>{if(c.value){const v=K(c.value);a.itemMap.value.set(v,{ref:c.value,value:s.value}),d(()=>a.itemMap.value.delete(v))}}),()=>y(R,{...i,[x]:"",ref:u},r)}}),E=C(()=>Array.from(a.itemMap.value.values())),b=C(()=>a.itemMap.value.size);return{getItems:I,reactiveItems:E,itemMapSize:b,CollectionSlot:g,CollectionItem:S}}const X="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},ee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function te(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function se(e,t,n){const o=te(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ee[o]}function oe(e,t=!1){const n=_();for(const o of e)if(o===n||(o.focus({preventScroll:t}),_()!==n))return}function ie(e,t){return e.map((n,o)=>e[(t+o)%e.length])}const[le,ne]=Y("RovingFocusGroup"),ue=A({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:n}){const o=e,a=n,{loop:I,orientation:g,dir:S}=H(o),E=J(S),b=q(o,"currentTabStopId",a,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),s=p(!1),r=p(!1),i=p(0),{getItems:u,CollectionSlot:c}=Q({isProvider:!0});function d(l){const m=!r.value;if(l.currentTarget&&l.target===l.currentTarget&&m&&!s.value){const h=new CustomEvent(X,Z);if(l.currentTarget.dispatchEvent(h),a("entryFocus",h),!h.defaultPrevented){const T=u().map(f=>f.ref).filter(f=>f.dataset.disabled!==""),B=T.find(f=>f.getAttribute("data-active")===""),D=T.find(f=>f.id===b.value),U=[B,D,...T].filter(Boolean);oe(U,o.preventScrollOnEntryFocus)}}r.value=!1}function v(){setTimeout(()=>{r.value=!1},1)}return t({getItems:u}),ne({loop:I,dir:E,orientation:g,currentTabStopId:b,onItemFocus:l=>{b.value=l},onItemShiftTab:()=>{s.value=!0},onFocusableItemAdd:()=>{i.value++},onFocusableItemRemove:()=>{i.value--}}),(l,m)=>(O(),P(w(c),null,{default:F(()=>[W(w($),{tabindex:s.value||i.value===0?-1:0,"data-orientation":w(g),as:l.as,"as-child":l.asChild,dir:w(E),style:{outline:"none"},onMousedown:m[0]||(m[0]=h=>r.value=!0),onMouseup:v,onFocus:d,onBlur:m[1]||(m[1]=h=>s.value=!1)},{default:F(()=>[N(l.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{ue as _,Q as a,re as b,M as c,oe as f,se as g,le as i,J as u,ie as w};
