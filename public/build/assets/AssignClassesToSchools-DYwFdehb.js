import{d as F,r as b,G as k,H as L,i as o,o as l,f as n,g as e,u as r,h as H,j as x,I as M,z as q,F as h,m as w,k as C,e as S,t as d,A as z,J as E,K as G,b as A,_ as J,l as p,W as K}from"./app-0hD9jktS.js";import{u as O}from"./school-SWVnhMs_.js";import{_ as U,a as W}from"./AvatarImage.vue_vue_type_script_setup_true_lang-DLhJV-ve.js";import{B as V}from"./building-2-0J7JWYjO.js";import{I as P}from"./info-DWKpZpD6.js";import{L as j}from"./loader-circle-Dg-d1WoA.js";import{C as Q}from"./chevron-down-Bc9-FnA7.js";import{B as X}from"./book-open-Dculjk7S.js";import{C as Y}from"./circle-check-big-5ANwAqnJ.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"max-w-7xl mx-auto w-full px-4 py-6 sm:py-8"},I={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},ee={class:"text-2xl sm:text-3xl font-bold text-neutral-900 dark:text-neutral-100 flex items-center gap-3"},se={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-xl p-4 mb-6"},te={class:"flex items-start gap-3"},ae={class:"w-6 h-6 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"},re={key:0,class:"text-center py-12"},le={class:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},ne={key:1,class:"space-y-4"},oe=["onClick"],ie={class:"flex items-center gap-3"},de={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"},ce={class:"text-left"},ue={class:"font-semibold text-gray-900 dark:text-gray-100 text-lg"},ge={class:"text-sm text-gray-500 dark:text-gray-400"},fe={class:"flex items-center gap-2"},me={class:"text-sm text-gray-500 dark:text-gray-400"},be={class:"p-4 bg-white dark:bg-neutral-900 border-t border-gray-200 dark:border-neutral-700"},xe={class:"mb-4"},pe={class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},ve={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4"},ye=["value","onUpdate:modelValue"],he={class:"flex items-center gap-2"},_e={class:"font-medium text-gray-900 dark:text-gray-100"},ke={key:0,class:"text-center py-12"},we={class:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},Ce=F({__name:"AssignClassesToSchools",setup(Se){const v=b([]),_=b([]),y=b(!0),i=k({}),g=b([]),c=k({}),B=O();function f(a){return g.value.includes(a)}function N(a){f(a)?g.value=g.value.filter(s=>s!==a):g.value.push(a)}async function T(){y.value=!0;try{const s=await(await fetch("/class-assignment")).json();v.value=s.schools,_.value=s.classes;for(const t of s.schools)c[t.id]=(t.classes||[]).map(m=>m.id)}catch{p.error("Failed to load data.")}finally{y.value=!1}}async function $(a){i[a]=!0;try{K.post(`/class-assignment/${a}/assign`,{class_ids:c[a]},{onSuccess:async()=>{p.success("Assignments saved successfully!"),await B.fetchSchools()},onError:()=>{p.error("Failed to save assignments.")},onFinish:()=>{i[a]=!1}})}catch{p.error("An error occurred."),i[a]=!1}}return L(T),(a,s)=>(l(),o(h,null,[n(r(H),{title:"Assign Classes to Schools"}),e("div",Z,[e("div",I,[e("div",null,[e("h1",ee,[n(r(V),{class:"w-8 h-8 text-blue-600"}),s[0]||(s[0]=x(" Assign Classes to Schools "))]),s[1]||(s[1]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-2"}," Manage which classes are available in each school ",-1))])]),e("div",se,[e("div",te,[e("div",ae,[n(r(P),{class:"w-4 h-4 text-blue-600"})]),s[2]||(s[2]=M('<div data-v-2c08ffe6><h3 class="font-medium text-blue-900 dark:text-blue-100 mb-2" data-v-2c08ffe6>How to use this page:</h3><ul class="text-sm text-blue-800 dark:text-blue-200 space-y-1" data-v-2c08ffe6><li class="flex items-start gap-2" data-v-2c08ffe6><span class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0" data-v-2c08ffe6></span><span data-v-2c08ffe6>Tap on a <strong data-v-2c08ffe6>school name</strong> to expand and see available classes</span></li><li class="flex items-start gap-2" data-v-2c08ffe6><span class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0" data-v-2c08ffe6></span><span data-v-2c08ffe6>Check or uncheck classes to assign or remove them from the school</span></li><li class="flex items-start gap-2" data-v-2c08ffe6><span class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0" data-v-2c08ffe6></span><span data-v-2c08ffe6>Tap <strong data-v-2c08ffe6>Save Assignments</strong> to save your changes</span></li></ul></div>',1))])]),y.value?(l(),o("div",re,[e("div",le,[n(r(j),{class:"w-8 h-8 text-gray-400 animate-spin"})]),s[3]||(s[3]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Loading Schools...",-1)),s[4]||(s[4]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Please wait while we load the school data",-1))])):(l(),o("div",ne,[(l(!0),o(h,null,w(v.value,t=>{var m;return l(),o("div",{key:t.id,class:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 shadow-sm overflow-hidden"},[e("button",{class:"w-full flex justify-between items-center px-4 py-4 bg-gray-50 dark:bg-neutral-800 hover:bg-gray-100 dark:hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",onClick:u=>N(t.id)},[e("div",ie,[e("div",de,[n(r(W),{class:"h-10 w-10"},{default:S(()=>[n(r(U),{src:(t==null?void 0:t.logo_url)??"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSVJvdr9q2sYXdV5Qn8j47CV7i1nDNK-pIew&s",alt:(t==null?void 0:t.name)??"No School Selected"},null,8,["src","alt"])]),_:2},1024)]),e("div",ce,[e("span",ue,d(t.name),1),e("div",ge,d(((m=c[t.id])==null?void 0:m.length)||0)+" classes assigned ",1)])]),e("div",fe,[e("span",me,d(f(t.id)?"Hide":"Show"),1),n(r(Q),{class:z(["w-5 h-5 text-gray-400 transition-transform duration-200",{"rotate-180":f(t.id)}])},null,8,["class"])])],8,oe),C(e("div",be,[e("div",xe,[e("p",pe,[s[5]||(s[5]=x(" Select classes to assign to ")),e("strong",null,d(t.name),1),s[6]||(s[6]=x(": "))]),e("div",ve,[(l(!0),o(h,null,w(_.value,u=>(l(),o("label",{key:u.id,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-neutral-800 rounded-lg border border-gray-200 dark:border-neutral-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors"},[C(e("input",{type:"checkbox",value:u.id,"onUpdate:modelValue":D=>c[t.id]=D,class:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,ye),[[G,c[t.id]]]),e("div",he,[n(r(X),{class:"w-4 h-4 text-gray-500"}),e("span",_e,d(u.name),1)])]))),128))]),n(r(J),{onClick:u=>$(t.id),disabled:i[t.id],class:"w-full px-6 py-3 text-base font-medium bg-blue-600 hover:bg-blue-700 disabled:opacity-50"},{default:S(()=>[i[t.id]?(l(),A(r(j),{key:0,class:"w-5 h-5 mr-3 animate-spin"})):(l(),A(r(Y),{key:1,class:"w-5 h-5 mr-3"})),x(" "+d(i[t.id]?"Saving...":"Save Assignments"),1)]),_:2},1032,["onClick","disabled"])])],512),[[E,f(t.id)]])])}),128)),v.value.length===0?(l(),o("div",ke,[e("div",we,[n(r(V),{class:"w-8 h-8 text-gray-400"})]),s[7]||(s[7]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"No schools found",-1)),s[8]||(s[8]=e("p",{class:"text-gray-600 dark:text-gray-400"},"There are no schools available to assign classes to",-1))])):q("",!0)]))])],64))}}),He=R(Ce,[["__scopeId","data-v-2c08ffe6"]]);export{He as default};
