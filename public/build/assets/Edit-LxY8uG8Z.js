import{d as $,s as C,x as N,r as p,L as j,c as q,H as I,b as P,o as B,e as n,f as l,g as t,u as o,h as E,p as A,j as d,_ as b,W as c,l as w}from"./app-oDzFbDpS.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-B8xcv65_.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-BphRAz40.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-CJXbLAqT.js";import{_}from"./InputError.vue_vue_type_script_setup_true_lang-DL9oimPF.js";import{u as F}from"./school-T4gwIvXC.js";import{_ as M}from"./AvatarUpload.vue_vue_type_script_setup_true_lang-CKOJkUR9.js";import{_ as G}from"./FileInput-BK6eYL8g.js";import"./RovingFocusGroup-CLnOwjDo.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DPNLz3sn.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cob2K5o9.js";import"./building-2-Dp0U14zc.js";import"./users-DDnJbTSp.js";import"./chevron-down-SN-issHr.js";import"./check-CEIiCWnz.js";import"./Icon.vue_vue_type_script_setup_true_lang-CktM08l_.js";import"./loader-circle-Dd3mNCCo.js";import"./target-BvkpxWi2.js";import"./triangle-alert-DX_7JuLF.js";import"./refresh-cw-CWAu1Of8.js";import"./save-BhC_gGhx.js";import"./plus-DaPcSaFA.js";import"./arrow-right-Dpm9A9Fy.js";import"./arrow-left-DCJF3lDn.js";import"./eye-off-ByIEJSqi.js";import"./eye-DjBiqAnr.js";import"./shield-CQ-AXaLs.js";import"./square-pen-D5JRiJpv.js";import"./info-Cu4eEvQq.js";import"./calendar-NzJ3-Hzp.js";import"./house-CZga5bkn.js";import"./book-open-NJHJ4pEX.js";import"./trash-Byk8sBRk.js";const T={class:"max-w-5xl mx-auto w-full px-2 sm:px-4 md:px-0 py-8"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},L={class:"flex flex-col gap-6"},R={class:"flex flex-col gap-4"},W={class:"flex flex-col gap-6 items-center justify-center"},z={class:"flex flex-col items-center gap-2"},H={class:"flex flex-col items-center justify-center w-full"},K={class:"w-full"},Q={class:"flex flex-col md:flex-row items-center justify-end gap-4 mt-10"},qe=$({__name:"Edit",setup(X){const i=C().props.school,V=[{title:"Schools",href:"/schools"},{title:"Edit School",href:`/schools/${i.id}/edit`}],s=N({name:i.name||"",address:i.address||"",contact:i.contact||"",logo:null,main_image:null}),m=p(),v=p(i.logo_url||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSVJvdr9q2sYXdV5Qn8j47CV7i1nDNK-pIew&s"),x=p(),S=p(i.main_image||"https://www.shutterstock.com/image-vector/school-building-front-view-entrance-260nw-2494026401.jpg"),u=F(),{schools:h}=j(u),y=q(()=>Array.isArray(h.value)?h.value:[]);I(()=>{y.value.length||u.fetchSchools()});const k=()=>{const r=new FormData;r.append("name",s.name),r.append("address",s.address),r.append("contact",s.contact),m.value&&r.append("logo",m.value),x.value&&r.append("main_image",x.value),r.append("_method","PUT"),c.post(route("schools.update",i.id),r,{forceFormData:!0,onSuccess:async()=>{await u.fetchSchools(),w.success("School updated successfully."),c.visit(route("schools.index"))},onError:()=>{w.error("Please fix the errors and try again.")}})},U=()=>{c.visit(route("schools.index"))};return(r,e)=>(B(),P(D,{breadcrumbs:V},{default:n(()=>[l(o(E),{title:"Edit School"}),t("div",T,[e[12]||(e[12]=t("h1",{class:"text-2xl font-bold mb-8 text-neutral-900 dark:text-neutral-100"},"Edit School",-1)),t("form",{onSubmit:A(k,["prevent"]),class:"bg-white dark:bg-neutral-900 p-8 rounded-xl border border-gray-200 dark:border-neutral-700 shadow-md w-full"},[t("div",J,[t("div",L,[t("div",null,[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold mb-4 text-neutral-800 dark:text-neutral-200"},"School Information",-1)),t("div",R,[t("div",null,[l(o(f),{class:"mb-1 ml-1",for:"name"},{default:n(()=>e[6]||(e[6]=[d("Name"),t("span",{class:"text-red-500"},"*",-1)])),_:1,__:[6]}),l(o(g),{id:"name",modelValue:o(s).name,"onUpdate:modelValue":e[0]||(e[0]=a=>o(s).name=a),required:"",placeholder:"School name",autocomplete:"off"},null,8,["modelValue"]),l(_,{class:"mt-2",message:o(s).errors.name},null,8,["message"])]),t("div",null,[l(o(f),{class:"mb-1 ml-1",for:"address"},{default:n(()=>e[7]||(e[7]=[d("Address"),t("span",{class:"text-red-500"},"*",-1)])),_:1,__:[7]}),l(o(g),{id:"address",modelValue:o(s).address,"onUpdate:modelValue":e[1]||(e[1]=a=>o(s).address=a),required:"",placeholder:"School address",autocomplete:"off"},null,8,["modelValue"]),l(_,{class:"mt-2",message:o(s).errors.address},null,8,["message"])]),t("div",null,[l(o(f),{class:"mb-1 ml-1",for:"contact"},{default:n(()=>e[8]||(e[8]=[d("Contact"),t("span",{class:"text-red-500"},"*",-1)])),_:1,__:[8]}),l(o(g),{id:"contact",modelValue:o(s).contact,"onUpdate:modelValue":e[2]||(e[2]=a=>o(s).contact=a),required:"",placeholder:"Contact info",autocomplete:"off"},null,8,["modelValue"]),l(_,{class:"mt-2",message:o(s).errors.contact},null,8,["message"])])])])]),t("div",W,[t("div",null,[t("div",z,[l(M,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a),preview:v.value,"onUpdate:preview":e[4]||(e[4]=a=>v.value=a),label:"Logo",hint:"PNG, JPG up to 1MB","max-size-m-b":1,width:150,height:150},null,8,["modelValue","preview"])])])])]),t("div",H,[t("div",K,[l(G,{label:"Main Image (optional)",modelValue:o(s).main_image,"onUpdate:modelValue":e[5]||(e[5]=a=>o(s).main_image=a),"preview-url":S.value,error:o(s).errors.main_image,required:!1},null,8,["modelValue","preview-url","error"])])]),t("div",Q,[l(o(b),{type:"button",variant:"outline",onClick:U},{default:n(()=>e[10]||(e[10]=[d("Cancel")])),_:1,__:[10]}),l(o(b),{disabled:o(s).processing},{default:n(()=>e[11]||(e[11]=[d("Update")])),_:1,__:[11]},8,["disabled"])])],32)])]),_:1}))}});export{qe as default};
