import{d as f,a2 as S,a8 as w,r as c,b as v,o as p,e as m,M as h,u as r,a5 as L,c as A,a7 as E,H as $,a6 as y,al as R,ai as B,w as k,k as x,J as I,A as z,aP as M,a4 as b}from"./app-0hD9jktS.js";const[j,F]=w("AvatarRoot"),P=f({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){return S(),F({imageLoadingStatus:c("idle")}),(a,s)=>(p(),v(r(L),{"as-child":a.asChild,as:a.as},{default:m(()=>[h(a.$slots,"default")]),_:3},8,["as-child","as"]))}});function C(t,a){return t?a?(t.src!==a&&(t.src=a),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function q(t,{referrerPolicy:a,crossOrigin:s}={}){const o=c(!1),n=c(null),i=A(()=>o.value?(!n.value&&E&&(n.value=new window.Image),n.value):null),u=c(C(i.value,t.value)),d=l=>()=>{o.value&&(u.value=l)};return $(()=>{o.value=!0,y(l=>{const e=i.value;if(!e)return;u.value=C(e,t.value);const _=d("loaded"),g=d("error");e.addEventListener("load",_),e.addEventListener("error",g),a!=null&&a.value&&(e.referrerPolicy=a.value),typeof(s==null?void 0:s.value)=="string"&&(e.crossOrigin=s.value),l(()=>{e.removeEventListener("load",_),e.removeEventListener("error",g)})})}),R(()=>{o.value=!1}),u}const D=f({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(t,{emit:a}){const s=t,o=a,{src:n,referrerPolicy:i,crossOrigin:u}=B(s);S();const d=j(),l=q(n,{referrerPolicy:i,crossOrigin:u});return k(l,e=>{o("loadingStatusChange",e),e!=="idle"&&(d.imageLoadingStatus.value=e)},{immediate:!0}),(e,_)=>x((p(),v(r(L),{role:"img","as-child":e.asChild,as:e.as,src:r(n),"referrer-policy":r(i)},{default:m(()=>[h(e.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[I,r(l)==="loaded"]])}}),J=f({__name:"Avatar",props:{class:{}},setup(t){const a=t;return(s,o)=>(p(),v(r(P),{"data-slot":"avatar",class:z(r(M)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a.class))},{default:m(()=>[h(s.$slots,"default")]),_:3},8,["class"]))}}),U=f({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{type:[String,Object,Function]}},setup(t){const a=t;return(s,o)=>(p(),v(r(D),b({"data-slot":"avatar-image"},a,{class:"aspect-square size-full"}),{default:m(()=>[h(s.$slots,"default")]),_:3},16))}});export{U as _,J as a,j as i};
