import{d as D,r as b,G as C,L as U,H,w as M,i as l,o,f as n,g as e,u as r,h as z,j as p,I as E,z as O,F as _,m as S,k as A,t as g,A as W,J as G,K as J,e as K,b as j,_ as P,l as m,W as R}from"./app-0hD9jktS.js";import{u as Y}from"./school-SWVnhMs_.js";import{U as N}from"./users-CQiJNf1m.js";import{I as q}from"./info-DWKpZpD6.js";import{L as B}from"./loader-circle-Dg-d1WoA.js";import{B as T}from"./book-open-Dculjk7S.js";import{C as Q}from"./chevron-down-Bc9-FnA7.js";import{C as X}from"./circle-check-big-5ANwAqnJ.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"max-w-7xl mx-auto w-full px-4 py-6 sm:py-8"},ee={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},se={class:"text-2xl sm:text-3xl font-bold text-neutral-900 dark:text-neutral-100 flex items-center gap-3"},te={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-xl p-4 mb-6"},ae={class:"flex items-start gap-3"},re={class:"w-6 h-6 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"},oe={key:0,class:"text-center py-12"},ne={class:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},le={key:1,class:"space-y-4"},ie=["onClick"],de={class:"flex items-center gap-3"},ce={class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center"},ge={class:"text-left"},ue={class:"font-semibold text-gray-900 dark:text-gray-100 text-lg"},fe={class:"text-sm text-gray-500 dark:text-gray-400"},me={class:"flex items-center gap-2"},he={class:"text-sm text-gray-500 dark:text-gray-400"},xe={class:"p-4 bg-white dark:bg-neutral-900 border-t border-gray-200 dark:border-neutral-700"},ve={class:"mb-4"},be={class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},pe={class:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-5 xl:grid-cols-6 gap-3 mb-4"},ye=["value","onUpdate:modelValue"],ke={class:"flex items-center gap-2"},_e={class:"font-medium text-gray-900 dark:text-gray-100"},we={key:0,class:"text-center py-12"},Ce={class:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},Se=D({__name:"AssignSectionsToClasses",setup(Ae){const h=b([]),y=b([]),k=b(!0),d=C({}),x=b([]),u=C({}),V=Y(),{selectedSchool:c}=U(V);function v(t){return x.value.includes(t)}function F(t){v(t)?x.value=x.value.filter(s=>s!==t):x.value.push(t)}async function w(){var t;if(!((t=c.value)!=null&&t.id)){h.value=[],y.value=[];return}k.value=!0;try{const a=await(await fetch(`/section-assignment?school_id=${c.value.id}`)).json();h.value=a.classes,y.value=a.sections;for(const f of a.classes)u[f.id]=(f.sections||[]).map(i=>i.id)}catch{m.error("Failed to load data.")}finally{k.value=!1}}async function L(t){if(!c.value||!c.value.id){m.error("No school selected.");return}d[t]=!0;try{R.post(`/section-assignment/${t}/assign`,{section_ids:u[t],school_id:c.value.id},{onSuccess:()=>{m.success("Assignments saved successfully!")},onError:()=>{m.error("Failed to save assignments.")},onFinish:()=>{d[t]=!1}})}catch{m.error("An error occurred."),d[t]=!1}}return H(w),M(()=>{var t;return(t=c.value)==null?void 0:t.id},w),(t,s)=>(o(),l(_,null,[n(r(z),{title:"Assign Sections to Classes"}),e("div",I,[e("div",ee,[e("div",null,[e("h1",se,[n(r(N),{class:"w-8 h-8 text-green-600"}),s[0]||(s[0]=p(" Assign Sections to Classes "))]),s[1]||(s[1]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-2"}," Manage which sections are available in each class ",-1))])]),e("div",te,[e("div",ae,[e("div",re,[n(r(q),{class:"w-4 h-4 text-blue-600"})]),s[2]||(s[2]=E('<div data-v-031f6691><h3 class="font-medium text-blue-900 dark:text-blue-100 mb-2" data-v-031f6691>How to use this page:</h3><ul class="text-sm text-blue-800 dark:text-blue-200 space-y-1" data-v-031f6691><li class="flex items-start gap-2" data-v-031f6691><span class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0" data-v-031f6691></span><span data-v-031f6691><strong data-v-031f6691>Select a school</strong> from the school switcher at the top of the page</span></li><li class="flex items-start gap-2" data-v-031f6691><span class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0" data-v-031f6691></span><span data-v-031f6691>Tap on a <strong data-v-031f6691>class name</strong> to expand and see available sections</span></li><li class="flex items-start gap-2" data-v-031f6691><span class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0" data-v-031f6691></span><span data-v-031f6691>Check or uncheck sections to assign or remove them from the class</span></li><li class="flex items-start gap-2" data-v-031f6691><span class="w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0" data-v-031f6691></span><span data-v-031f6691>Tap <strong data-v-031f6691>Save Assignments</strong> to save your changes</span></li></ul><div class="mt-3 p-2 bg-blue-100 dark:bg-blue-800 rounded-lg" data-v-031f6691><p class="text-xs text-blue-700 dark:text-blue-200" data-v-031f6691><strong data-v-031f6691>Note:</strong> All changes only affect the currently selected school. You cannot accidentally change classes or sections for other schools. </p></div></div>',1))])]),k.value?(o(),l("div",oe,[e("div",ne,[n(r(B),{class:"w-8 h-8 text-gray-400 animate-spin"})]),s[3]||(s[3]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Loading Classes...",-1)),s[4]||(s[4]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Please wait while we load the class data",-1))])):(o(),l("div",le,[(o(!0),l(_,null,S(h.value,a=>{var f;return o(),l("div",{key:a.id,class:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 shadow-sm overflow-hidden"},[e("button",{class:"w-full flex justify-between items-center px-4 py-4 bg-gray-50 dark:bg-neutral-800 hover:bg-gray-100 dark:hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-all",onClick:i=>F(a.id)},[e("div",de,[e("div",ce,[n(r(T),{class:"w-5 h-5 text-green-600"})]),e("div",ge,[e("span",ue,g(a.name),1),e("div",fe,g(((f=u[a.id])==null?void 0:f.length)||0)+" sections assigned ",1)])]),e("div",me,[e("span",he,g(v(a.id)?"Hide":"Show"),1),n(r(Q),{class:W(["w-5 h-5 text-gray-400 transition-transform duration-200",{"rotate-180":v(a.id)}])},null,8,["class"])])],8,ie),A(e("div",xe,[e("div",ve,[e("p",be,[s[5]||(s[5]=p(" Select sections to assign to ")),e("strong",null,g(a.name),1),s[6]||(s[6]=p(": "))]),e("div",pe,[(o(!0),l(_,null,S(y.value,i=>(o(),l("label",{key:i.id,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-neutral-800 rounded-lg border border-gray-200 dark:border-neutral-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors"},[A(e("input",{type:"checkbox",value:i.id,"onUpdate:modelValue":$=>u[a.id]=$,class:"w-5 h-5 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,ye),[[J,u[a.id]]]),e("div",ke,[n(r(N),{class:"w-4 h-4 text-gray-500"}),e("span",_e,g(i.name),1)])]))),128))]),n(r(P),{onClick:i=>L(a.id),disabled:d[a.id],class:"w-full px-6 py-3 text-base font-medium bg-green-600 hover:bg-green-700 disabled:opacity-50"},{default:K(()=>[d[a.id]?(o(),j(r(B),{key:0,class:"w-5 h-5 mr-3 animate-spin"})):(o(),j(r(X),{key:1,class:"w-5 h-5 mr-3"})),p(" "+g(d[a.id]?"Saving...":"Save Assignments"),1)]),_:2},1032,["onClick","disabled"])])],512),[[G,v(a.id)]])])}),128)),h.value.length===0?(o(),l("div",we,[e("div",Ce,[n(r(T),{class:"w-8 h-8 text-gray-400"})]),s[7]||(s[7]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"No classes found",-1)),s[8]||(s[8]=e("p",{class:"text-gray-600 dark:text-gray-400"},"There are no classes available in the selected school ",-1))])):O("",!0)]))])],64))}}),Ue=Z(Se,[["__scopeId","data-v-031f6691"]]);export{Ue as default};
