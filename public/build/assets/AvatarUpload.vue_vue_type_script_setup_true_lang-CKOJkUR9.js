import{d as z,r as d,w as C,i as r,o as l,z as f,g as u,j as N,t as m,ad as b,f as V,A as w,p}from"./app-oDzFbDpS.js";import{_ as D}from"./Icon.vue_vue_type_script_setup_true_lang-CktM08l_.js";const M={class:"flex flex-col items-center"},$={key:0,class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},A={key:0,class:"text-red-500"},T=["src","alt"],j={key:1,class:"flex items-center justify-center w-full h-full text-gray-300 dark:text-neutral-600"},F=["accept"],I={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},P={key:1,class:"text-xs text-red-500 mt-1"},G=z({__name:"AvatarUpload",props:{modelValue:File,label:String,hint:String,required:Boolean,accept:{type:String,default:"image/*"},maxSizeMB:{type:Number,default:1},preview:String,width:{type:Number,default:96},height:{type:Number,default:96}},emits:["update:modelValue","update:preview"],setup(t,{emit:k}){const i=t,h=k,v=d(null),o=d(!1),s=d(""),n=d(i.preview||"");function g(){var e;(e=v.value)==null||e.click()}function B(e){const a=e.target.files;a&&a[0]&&x(a[0])}function S(e){o.value=!1,e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files[0]&&x(e.dataTransfer.files[0])}function x(e){if(s.value="",!e.type.startsWith("image/")){s.value="Please select a valid image file";return}if(e.size>i.maxSizeMB*1024*1024){s.value=`Image size must be less than ${i.maxSizeMB}MB`;return}const a=new FileReader;a.onload=c=>{var y;n.value=(y=c.target)==null?void 0:y.result,h("update:preview",n.value)},a.readAsDataURL(e),h("update:modelValue",e)}return C(()=>i.preview,e=>{e&&(n.value=e)}),(e,a)=>(l(),r("div",M,[t.label?(l(),r("label",$,[N(m(t.label),1),t.required?(l(),r("span",A,"*")):f("",!0)])):f("",!0),u("div",{class:w(["relative flex flex-col items-center justify-center rounded-full border-2 border-dashed border-gray-300 dark:border-neutral-700 cursor-pointer bg-gray-50 dark:bg-neutral-800 hover:border-purple-400 dark:hover:border-purple-500 transition overflow-hidden",o.value?"border-purple-400 dark:border-purple-500":""]),style:b({width:t.width+"px",height:t.height+"px"}),onClick:g,onDragover:a[0]||(a[0]=p(c=>o.value=!0,["prevent"])),onDragleave:a[1]||(a[1]=p(c=>o.value=!1,["prevent"])),onDrop:p(S,["prevent"])},[n.value?(l(),r("img",{key:0,src:n.value,alt:t.label||"Avatar Preview",style:b({width:t.width+"px",height:t.height+"px"}),class:"object-cover rounded-full"},null,12,T)):(l(),r("span",j,[V(D,{name:"User",class:w(`w-[${t.width/2}px] h-[${t.height/2}px]`)},null,8,["class"])])),u("input",{ref_key:"fileInput",ref:v,type:"file",accept:t.accept,class:"hidden",onChange:B},null,40,F)],38),u("button",{type:"button",onClick:g,class:"mt-2 px-4 py-1 rounded bg-purple-600 text-white text-sm font-medium hover:bg-purple-700 focus:outline-none"},"Choose"),u("span",I,m(t.hint||"PNG, JPG up to 1MB"),1),s.value?(l(),r("div",P,m(s.value),1)):f("",!0)]))}});export{G as _};
