import{d as b,a3 as N,a2 as O,aD as z,H as A,b as y,o as _,e as a,M as h,a4 as P,u as e,a5 as R,aT as q,c as G,aK as J,aP as K,r as B,x as F,i as C,f as s,g as l,_ as k,j as d,B as H,C as L,D as W,E as X,s as Y,b1 as Q,h as Z,p as ee,z as V,aX as te,l as S,T as se,k as oe,J as le}from"./app-0hD9jktS.js";import{h as ae,_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_OfVMdc.js";import{_ as T}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-C6W3J6jg.js";import{_ as x}from"./InputError.vue_vue_type_script_setup_true_lang-BnFbo3YU.js";import{_ as ne}from"./DialogHeader.vue_vue_type_script_setup_true_lang-DOJjbuxF.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-ByoFr_iA.js";import{_ as w}from"./Label.vue_vue_type_script_setup_true_lang-CLv8w6I-.js";import{_ as ie}from"./Layout.vue_vue_type_script_setup_true_lang-Bi3HrDun.js";import"./RovingFocusGroup-BrsbekXI.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DLhJV-ve.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DV00-4L5.js";import"./building-2-0J7JWYjO.js";import"./users-CQiJNf1m.js";import"./school-SWVnhMs_.js";import"./chevron-down-Bc9-FnA7.js";import"./check-DytFQTDT.js";const de=b({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(f){const u=f,r=N(),{forwardRef:i,currentElement:o}=O();return r.contentId||(r.contentId=z(void 0,"reka-dialog-content")),A(()=>{r.triggerElement.value=o.value}),(p,n)=>(_(),y(e(R),P(u,{ref:e(i),type:p.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":e(r).open.value||!1,"aria-controls":e(r).open.value?e(r).contentId:void 0,"data-state":e(r).open.value?"open":"closed",onClick:e(r).onOpenToggle}),{default:a(()=>[h(p.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),ue=b({__name:"DialogClose",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]}},setup(f){const u=f;return(r,i)=>(_(),y(e(q),P({"data-slot":"dialog-close"},u),{default:a(()=>[h(r.$slots,"default")]),_:3},16))}}),me=b({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(f){const u=f,r=G(()=>{const{class:o,...p}=u;return p}),i=J(r);return(o,p)=>(_(),y(e(ae),P({"data-slot":"dialog-description"},e(i),{class:e(K)("text-muted-foreground text-sm",u.class)}),{default:a(()=>[h(o.$slots,"default")]),_:3},16,["class"]))}}),pe=b({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]}},setup(f){const u=f;return(r,i)=>(_(),y(e(de),P({"data-slot":"dialog-trigger"},u),{default:a(()=>[h(r.$slots,"default")]),_:3},16))}}),fe={class:"space-y-6"},ce={class:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10"},_e={class:"grid gap-2"},ge=b({__name:"DeleteUser",setup(f){const u=B(null),r=F({password:""}),i=p=>{p.preventDefault(),r.delete(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>o(),onError:()=>{var n;return(n=u.value)==null?void 0:n.focus()},onFinish:()=>r.reset()})},o=()=>{r.clearErrors(),r.reset()};return(p,n)=>(_(),C("div",fe,[s(T,{title:"Delete account",description:"Delete your account and all of its resources"}),l("div",ce,[n[7]||(n[7]=l("div",{class:"relative space-y-0.5 text-red-600 dark:text-red-100"},[l("p",{class:"font-medium"},"Warning"),l("p",{class:"text-sm"},"Please proceed with caution, this cannot be undone.")],-1)),s(e(X),null,{default:a(()=>[s(e(pe),{"as-child":""},{default:a(()=>[s(e(k),{variant:"destructive"},{default:a(()=>n[1]||(n[1]=[d("Delete account")])),_:1,__:[1]})]),_:1}),s(e(H),null,{default:a(()=>[l("form",{class:"space-y-6",onSubmit:i},[s(e(ne),{class:"space-y-3"},{default:a(()=>[s(e(L),null,{default:a(()=>n[2]||(n[2]=[d("Are you sure you want to delete your account?")])),_:1,__:[2]}),s(e(me),null,{default:a(()=>n[3]||(n[3]=[d(" Once your account is deleted, all of its resources and data will also be permanently deleted. Please enter your password to confirm you would like to permanently delete your account. ")])),_:1,__:[3]})]),_:1}),l("div",_e,[s(e(w),{for:"password",class:"sr-only"},{default:a(()=>n[4]||(n[4]=[d("Password")])),_:1,__:[4]}),s(e(v),{id:"password",type:"password",name:"password",ref_key:"passwordInput",ref:u,modelValue:e(r).password,"onUpdate:modelValue":n[0]||(n[0]=$=>e(r).password=$),placeholder:"Password"},null,8,["modelValue"]),s(x,{message:e(r).errors.password},null,8,["message"])]),s(e(W),{class:"gap-2"},{default:a(()=>[s(e(ue),{"as-child":""},{default:a(()=>[s(e(k),{variant:"secondary",onClick:o},{default:a(()=>n[5]||(n[5]=[d(" Cancel ")])),_:1,__:[5]})]),_:1}),s(e(k),{type:"submit",variant:"destructive",disabled:e(r).processing},{default:a(()=>n[6]||(n[6]=[d(" Delete account ")])),_:1,__:[6]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1})])]))}}),xe={class:"flex flex-col space-y-8 max-w-4xl mx-auto w-full px-2 sm:px-4 md:px-0"},ye={class:"flex flex-col md:flex-row gap-6 md:gap-6 items-stretch"},be={class:"flex-1 flex flex-col gap-4"},ve={class:"flex flex-col items-center justify-center gap-3 w-full max-w-xl md:max-w-[300px] mx-auto p-5 rounded-xl border border-gray-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 shadow-md"},we=["src"],ke={class:"flex flex-col justify-center items-center mt-2 w-full"},he={key:0,class:"rounded-lg bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 p-4 flex flex-col gap-2 mt-2"},Pe={key:0,class:"text-xs font-medium text-green-600 dark:text-green-400 mt-1"},$e={class:"flex items-center gap-4"},Ve={class:"text-sm text-neutral-600 dark:text-neutral-300"},Se=2,Ge=b({__name:"Profile",props:{mustVerifyEmail:{type:Boolean},status:{}},setup(f){const u=[{title:"Profile settings",href:"/settings/profile"}],i=Y().props.auth.user,o=F({name:i.name,username:i.username,email:i.email,phone_number:i.phone_number,profile_photo:null}),p=i.profile_photo_url||"/storage/default-profile.png",n=B(null),$=["image/jpeg","image/png","image/jpg"],U=()=>{window.confirm("Are you sure you want to remove your profile photo?")&&o.post(route("profile.remove-photo"),{preserveScroll:!0,onSuccess:()=>{n.value=null}})},g=Q("emitter"),E=c=>{const t=c.target;if(t&&t.files&&t.files[0]){const m=t.files[0];if(!$.includes(m.type)){g&&g.emit&&g.emit("alert",{title:"Invalid File Type",message:"Only JPG and PNG images are allowed.",confirmText:"OK"});return}if(m.size>Se*1024*1024){g&&g.emit&&g.emit("alert",{title:"File Too Large",message:"Image size must be less than 2MB.",confirmText:"OK"});return}o.profile_photo=m;const D=new FileReader;D.onload=M=>{var j;n.value=(j=M.target)==null?void 0:j.result},D.readAsDataURL(m)}},I=()=>{const c={...o.data()};o.profile_photo&&(c.profile_photo=o.profile_photo),c._method="PATCH",o.transform(()=>c).post(route("profile.update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{n.value=null,S.success("Profile updated successfully!")},onError:()=>{S.error("Failed to update profile!")}})};return(c,t)=>(_(),y(re,{breadcrumbs:u},{default:a(()=>[s(e(Z),{title:"Profile settings"}),s(ie,null,{default:a(()=>[l("div",xe,[s(T,{title:"Profile information",description:"Update your name, email, and profile photo"}),l("form",{onSubmit:ee(I,["prevent"]),class:"space-y-8"},[l("div",ye,[l("div",be,[l("div",null,[s(e(w),{for:"name"},{default:a(()=>t[5]||(t[5]=[d("Name")])),_:1,__:[5]}),s(e(v),{id:"name",class:"mt-1 block w-full",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=m=>e(o).name=m),required:"",autocomplete:"name",placeholder:"Full name"},null,8,["modelValue"]),s(x,{class:"mt-2",message:e(o).errors.name},null,8,["message"])]),l("div",null,[s(e(w),{for:"username",class:"mt-2"},{default:a(()=>t[6]||(t[6]=[d("Username")])),_:1,__:[6]}),s(e(v),{id:"username",type:"text",class:"mt-1 block w-full",modelValue:e(o).username,"onUpdate:modelValue":t[1]||(t[1]=m=>e(o).username=m),required:"",autocomplete:"username",placeholder:"Username"},null,8,["modelValue"]),s(x,{class:"mt-2",message:e(o).errors.username},null,8,["message"])]),l("div",null,[s(e(w),{for:"email",class:"mt-2"},{default:a(()=>t[7]||(t[7]=[d("Email address")])),_:1,__:[7]}),s(e(v),{id:"email",type:"email",class:"mt-1 block w-full",modelValue:e(o).email,"onUpdate:modelValue":t[2]||(t[2]=m=>e(o).email=m),required:"",autocomplete:"email",placeholder:"Email address"},null,8,["modelValue"]),s(x,{class:"mt-2",message:e(o).errors.email},null,8,["message"])]),l("div",null,[s(e(w),{for:"phone_number",class:"mt-2"},{default:a(()=>t[8]||(t[8]=[d("Phone Number")])),_:1,__:[8]}),s(e(v),{id:"phone_number",type:"text",class:"mt-1 block w-full",modelValue:e(o).phone_number,"onUpdate:modelValue":t[3]||(t[3]=m=>e(o).phone_number=m),required:"",autocomplete:"tel",placeholder:"Phone Number"},null,8,["modelValue"]),s(x,{class:"mt-2",message:e(o).errors.phone_number},null,8,["message"])])]),l("div",ve,[t[12]||(t[12]=l("div",{class:"mb-1 font-semibold text-center text-foreground dark:text-neutral-100 text-base"}," Profile Photo",-1)),l("img",{src:n.value||e(p),alt:"Profile Photo",class:"w-24 h-24 rounded-full object-cover border border-gray-300 dark:border-neutral-700 shadow"},null,8,we),l("label",ke,[t[9]||(t[9]=l("span",{class:"block text-xs text-muted-foreground dark:text-neutral-400 mb-1"},"Upload a new photo",-1)),l("input",{type:"file",accept:"image/jpeg,image/png",class:"block w-full text-sm text-gray-500 dark:text-neutral-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/80 cursor-pointer dark:file:text-black mx-auto",onInput:E},null,32),s(x,{class:"mt-2",message:e(o).errors.profile_photo},null,8,["message"]),t[10]||(t[10]=l("span",{class:"block text-xs text-muted-foreground dark:text-neutral-400 mt-1"},"Allowed: JPG, PNG. Max size: 2MB.",-1))]),e(i).profile_photo_path!=="/storage/default-profile.png"?(_(),y(e(k),{key:0,type:"button",variant:"destructive",class:"mt-2",onClick:U},{default:a(()=>t[11]||(t[11]=[d(" Remove Photo ")])),_:1,__:[11]})):V("",!0)])]),c.mustVerifyEmail&&!e(i).email_verified_at?(_(),C("div",he,[t[14]||(t[14]=l("p",{class:"text-sm text-yellow-800 dark:text-yellow-200 font-medium flex items-center gap-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M12 20a8 8 0 100-16 8 8 0 000 16z"})]),d(" Your email address is unverified. ")],-1)),s(e(te),{href:c.route("verification.send"),method:"post",as:"button",class:"inline-block w-fit text-sm font-semibold text-yellow-700 dark:text-yellow-200 underline underline-offset-4 hover:text-yellow-900 dark:hover:text-yellow-100 transition",onSuccess:t[4]||(t[4]=()=>e(S).success("Verification email sent!"))},{default:a(()=>t[13]||(t[13]=[d(" Click here to resend the verification email. ")])),_:1,__:[13]},8,["href"]),c.status==="verification-link-sent"?(_(),C("div",Pe," A new verification link has been sent to your email address. ")):V("",!0)])):V("",!0),l("div",$e,[s(e(k),{disabled:e(o).processing},{default:a(()=>t[15]||(t[15]=[d("Save")])),_:1,__:[15]},8,["disabled"]),s(se,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:a(()=>[oe(l("p",Ve," Saved.",512),[[le,e(o).recentlySuccessful]])]),_:1})])],32)]),s(ge)]),_:1})]),_:1}))}});export{Ge as default};
