import{d as g,r as i,w as f,i as n,o as d,g as o,p as h,f as x,z as y,l as u,W as k}from"./app-oDzFbDpS.js";import{_}from"./FileInput-BK6eYL8g.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-white/30"},V={class:"bg-white dark:bg-neutral-900 rounded-lg shadow-lg p-6 w-full max-w-md relative border border-neutral-200 dark:border-neutral-700"},C={key:0,class:"flex flex-col items-center mt-2"},$=["src"],M={class:"flex justify-end gap-2 mt-6"},j=["disabled"],B={key:0},F={key:1},P=g({__name:"UploadVoucherModal",props:{id:{},submitUrl:{}},emits:["uploaded","close"],setup(p,{emit:m}){const c=p,v=m,r=i(null),s=i(null),a=i(!1);f(r,t=>{t?s.value=URL.createObjectURL(t):s.value=null});function b(){if(!r.value){u.error("Please select a voucher image.");return}a.value=!0;const t=new FormData;t.append("paid_voucher_image",r.value),k.post(route(c.submitUrl,c.id),t,{forceFormData:!0,onSuccess:e=>{console.log("Upload success response:",e),u.success("Paid voucher uploaded successfully."),v("uploaded")},onError:e=>{console.error("Upload error:",e),u.error("Failed to upload voucher.")},onFinish:()=>{a.value=!1}})}return(t,e)=>(d(),n("div",U,[o("div",V,[o("button",{class:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",onClick:e[0]||(e[0]=l=>t.$emit("close"))},e[4]||(e[4]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e[5]||(e[5]=o("h2",{class:"text-lg font-semibold mb-4 text-center text-gray-900 dark:text-gray-100"},"Upload Paid Voucher",-1)),o("form",{onSubmit:h(b,["prevent"])},[x(_,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),accept:"image/*",onChange:e[2]||(e[2]=l=>s.value=null)},null,8,["modelValue"]),s.value?(d(),n("div",C,[o("img",{src:s.value,alt:"Preview",class:"w-40 h-auto border rounded mb-2"},null,8,$)])):y("",!0),o("div",M,[o("button",{type:"button",class:"px-4 py-2 rounded bg-gray-200 dark:bg-neutral-700 text-gray-700 dark:text-gray-200",onClick:e[3]||(e[3]=l=>t.$emit("close"))},"Cancel"),o("button",{type:"submit",disabled:!r.value||a.value,class:"px-4 py-2 rounded bg-green-700 text-white hover:bg-green-800 disabled:opacity-60"},[a.value?(d(),n("span",B,"Uploading...")):(d(),n("span",F,"Upload & Approve"))],8,j)])],32)])]))}}),z=w(P,[["__scopeId","data-v-eb9b5698"]]);export{z as U};
