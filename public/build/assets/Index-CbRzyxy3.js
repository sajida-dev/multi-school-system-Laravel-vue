import{d as L,r as _,c as D,w as W,b as q,o,e as u,f as l,g as t,u as a,h as G,i as d,_ as b,W as h,j as m,k as y,F as g,m as c,t as n,v,A as H,a as J}from"./app-0hD9jktS.js";import{F as K,l as O}from"./style-BhhzWR2R.js";import{a as N,_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_OfVMdc.js";import{_ as R}from"./Label.vue_vue_type_script_setup_true_lang-CLv8w6I-.js";import{P as X}from"./plus-DX8dkZyx.js";import{B as Y}from"./building-2-0J7JWYjO.js";import{U as Z}from"./users-CQiJNf1m.js";import{C as I}from"./calendar-DjniW4jB.js";import{R as T}from"./refresh-cw-DBp2ONfo.js";import{E as ee}from"./eye-Dtz9j6o0.js";import{S as te}from"./square-pen-QEAPgpV6.js";import"./RovingFocusGroup-BrsbekXI.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DLhJV-ve.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DV00-4L5.js";import"./school-SWVnhMs_.js";import"./chevron-down-Bc9-FnA7.js";import"./check-DytFQTDT.js";const se={class:"py-10"},re={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 p-6 mb-6"},le={class:"flex lg:flex-row flex-col items-center justify-between"},oe={class:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 p-6 mb-6"},de={class:"hidden md:grid grid-cols-1 md:grid-cols-4 gap-4"},ne=["value"],ie=["value"],ue=["value"],me={class:"flex items-end"},xe={class:"md:hidden"},ge={key:0,class:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 overflow-hidden"},ce={class:"p-6 border-b border-gray-200 dark:border-neutral-700"},pe={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2"},fe={class:"text-sm text-gray-600 dark:text-gray-400"},be={class:"overflow-x-auto"},ye={class:"w-full"},ve={class:"bg-white dark:bg-neutral-900 divide-y divide-gray-200 dark:divide-neutral-700"},ke={class:"px-6 py-4 whitespace-nowrap"},_e={class:"flex items-center"},we={class:"flex-shrink-0 h-10 w-10"},he={class:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},Ce={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},Se={class:"ml-4"},Re={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ue={class:"text-sm text-gray-500 dark:text-gray-400"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},Ne={class:"px-6 py-4 whitespace-nowrap"},Te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ae={class:"flex space-x-2"},Me={key:1,class:"text-center py-12"},$e={class:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},je={key:2,class:"text-center py-12"},Be={class:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},Ee={class:"sheet-content dark:bg-neutral-900"},Pe={class:"flex flex-col gap-4"},ze={class:"flex flex-col"},Le=["value"],De={class:"flex flex-col"},We=["value"],qe={class:"flex flex-col"},Ge=["value"],He={class:"pt-2"},it=L({__name:"Index",props:{classes:{},sections:{},results:{},selectedClass:{},selectedSection:{},selectedTerm:{},terms:{}},setup(A){const w=A,k=_([]),C=new Map,i=_(w.selectedClass||""),p=_(w.selectedSection||""),f=_(w.selectedTerm),S=_(),M=D(()=>{const r=w.classes.find(e=>e.id.toString()===i.value.toString());return r?r.name:""});async function $(r){if(C.has(r)){k.value=C.get(r);return}try{const e=await J.get(`/api/classes/${r}/sections`);C.set(r,e.data),k.value=e.data}catch(e){console.error("Failed to load sections:",e),k.value=[]}}W(i,r=>{p.value="",$(r)},{immediate:!0});function j(){var r;(r=S.value)==null||r.open()}function B(){var r;(r=S.value)==null||r.close()}function E(r){return r.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().substring(0,2)}function U(){i.value&&h.visit(route("exam-results.index"),{data:{class_id:i.value,section_id:p.value,term:f.value},preserveState:!0,preserveScroll:!0,replace:!0})}function P(){U(),B()}return(r,e)=>(o(),q(Q,{title:"Results Management"},{default:u(()=>[l(a(G),{title:"Results Management"}),t("div",se,[t("div",re,[t("div",ae,[t("div",le,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Results Management"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Manage student results and academic performance")],-1)),t("div",null,[l(a(b),{onClick:e[0]||(e[0]=s=>a(h).visit(r.route("exam-results.create"))),class:"px-4 py-2 text-sm"},{default:u(()=>[l(a(X),{class:"w-4 h-4 mr-2"}),e[7]||(e[7]=m(" Add Results "))]),_:1,__:[7]})])])]),t("div",oe,[t("div",de,[t("div",null,[l(a(R),{for:"class_id",class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(Y),{class:"w-4 h-4 inline mr-2"}),e[9]||(e[9]=m(" Class "))]),_:1,__:[9]}),y(t("select",{id:"class_id","onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),onchange:"fetchSections(this.value)",class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-neutral-600 rounded bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[e[10]||(e[10]=t("option",{value:""},"Select Class",-1)),(o(!0),d(g,null,c(r.classes,s=>(o(),d("option",{key:s.id,value:s.id},n(s.name),9,ne))),128))],512),[[v,i.value]])]),t("div",null,[l(a(R),{for:"section_id",class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(Z),{class:"w-4 h-4 inline mr-2"}),e[11]||(e[11]=m(" Section "))]),_:1,__:[11]}),y(t("select",{id:"section_id","onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-neutral-600 rounded bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[e[12]||(e[12]=t("option",{value:""},"All Sections",-1)),(o(!0),d(g,null,c(k.value,s=>(o(),d("option",{key:s.id,value:s.id},n(s.name),9,ie))),128))],512),[[v,p.value]])]),t("div",null,[l(a(R),{for:"term",class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(I),{class:"w-4 h-4 inline mr-2"}),e[13]||(e[13]=m(" Term "))]),_:1,__:[13]}),y(t("select",{id:"term","onUpdate:modelValue":e[3]||(e[3]=s=>f.value=s),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-neutral-600 rounded bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[(o(!0),d(g,null,c(r.terms,(s,x)=>(o(),d("option",{key:x,value:x},n(s),9,ue))),128))],512),[[v,f.value]])]),t("div",me,[l(a(b),{onClick:U,disabled:!i.value,class:"w-full px-3 py-2 text-sm"},{default:u(()=>[l(a(T),{class:"w-4 h-4 mr-2"}),e[14]||(e[14]=m(" Load Results "))]),_:1,__:[14]},8,["disabled"])])]),t("div",xe,[l(a(b),{onClick:j,variant:"outline",class:"w-full px-3 py-2 text-sm"},{default:u(()=>[l(a(K),{class:"w-4 h-4 mr-2"}),e[15]||(e[15]=m(" Filters "))]),_:1,__:[15]})])]),r.results.length>0?(o(),d("div",ge,[t("div",ce,[t("h2",pe," Results for "+n(M.value)+" - "+n(r.terms[f.value]),1),t("p",fe,n(r.results.length)+" student"+n(r.results.length!==1?"s":"")+" found ",1)]),t("div",be,[t("table",ye,[e[18]||(e[18]=t("thead",{class:"bg-gray-50 dark:bg-neutral-800"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Student "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Roll No "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Total Marks "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Percentage "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",ve,[(o(!0),d(g,null,c(r.results,s=>{var x,V,F;return o(),d("tr",{key:s.student.id,class:"hover:bg-gray-50 dark:hover:bg-neutral-800"},[t("td",ke,[t("div",_e,[t("div",we,[t("div",he,[t("span",Ce,n(E(((x=s.student)==null?void 0:x.name)||"Student")),1)])]),t("div",Se,[t("div",Re,n(((V=s.student)==null?void 0:V.name)||"Unknown"),1),t("div",Ue,n(((F=s.student.section)==null?void 0:F.name)||"No Section"),1)])])]),t("td",Ve,n(s.student.registration_number||"-"),1),t("td",Fe,n(s.total_marks)+"/"+n(s.total_possible_marks),1),t("td",Ne,[t("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.percentage>=80?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":s.percentage>=60?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200"])},n(s.percentage)+"% ",3)]),t("td",Te,[t("div",Ae,[l(a(b),{onClick:z=>a(h).visit(r.route("results.show",s.student.id)),variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:u(()=>[l(a(ee),{class:"w-3 h-3 mr-1"}),e[16]||(e[16]=m(" View "))]),_:2,__:[16]},1032,["onClick"]),l(a(b),{onClick:z=>a(h).visit(r.route("results.edit",s.student.id)),variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:u(()=>[l(a(te),{class:"w-3 h-3 mr-1"}),e[17]||(e[17]=m(" Edit "))]),_:2,__:[17]},1032,["onClick"])])])])}),128))])])])])):i.value?(o(),d("div",Me,[t("div",$e,[l(a(N),{class:"w-8 h-8 text-gray-400"})]),e[19]||(e[19]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"No results found",-1)),e[20]||(e[20]=t("p",{class:"text-gray-600 dark:text-gray-400"}," No results are available for the selected class and term. ",-1))])):(o(),d("div",je,[t("div",Be,[l(a(N),{class:"w-8 h-8 text-gray-400"})]),e[21]||(e[21]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Select Class and Term",-1)),e[22]||(e[22]=t("p",{class:"text-gray-600 dark:text-gray-400"}," Choose a class and term to view student results. ",-1))]))])]),l(a(O),{overlay:!0,"can-swipe":!0,"overlay-click-close":!0,"transition-duration":.5,ref_key:"filterSheet",ref:S,class:"dark:bg-neutral-900"},{default:u(()=>[t("div",Ee,[e[29]||(e[29]=t("h2",{class:"text-lg font-semibold mb-4"},"Results Filters",-1)),t("div",Pe,[t("div",ze,[e[24]||(e[24]=t("label",{for:"class_id_mobile",class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Class ",-1)),y(t("select",{id:"class_id_mobile","onUpdate:modelValue":e[4]||(e[4]=s=>i.value=s),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-neutral-900"},[e[23]||(e[23]=t("option",{value:""},"Select Class",-1)),(o(!0),d(g,null,c(r.classes,s=>(o(),d("option",{key:s.id,value:s.id},n(s.name),9,Le))),128))],512),[[v,i.value]])]),t("div",De,[e[26]||(e[26]=t("label",{for:"section_id_mobile",class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Section ",-1)),y(t("select",{id:"section_id_mobile","onUpdate:modelValue":e[5]||(e[5]=s=>p.value=s),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-neutral-900"},[e[25]||(e[25]=t("option",{value:""},"All Sections",-1)),(o(!0),d(g,null,c(k.value,s=>(o(),d("option",{key:s.id,value:s.id},n(s.name),9,We))),128))],512),[[v,p.value]])]),t("div",qe,[e[27]||(e[27]=t("label",{for:"term_mobile",class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Term ",-1)),y(t("select",{id:"term_mobile","onUpdate:modelValue":e[6]||(e[6]=s=>f.value=s),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-neutral-900"},[(o(!0),d(g,null,c(r.terms,(s,x)=>(o(),d("option",{key:x,value:x},n(s),9,Ge))),128))],512),[[v,f.value]])]),t("div",He,[l(a(b),{onClick:P,disabled:!i.value,class:"w-full px-3 py-2 text-sm"},{default:u(()=>[l(a(T),{class:"w-4 h-4 mr-2"}),e[28]||(e[28]=m(" Load Results "))]),_:1,__:[28]},8,["disabled"])])])])]),_:1},512)]),_:1}))}});export{it as default};
