import{q as $e,d as Qe,s as Xe,r as b,w as C,c as H,W as k,H as Je,y as Ke,b as N,o,e as u,f as l,g as t,u as a,h as Ye,i as n,z as A,j as d,k as $,A as O,t as g,_ as w,F as M,m as D,v as J,X as te,E as de,B as ue,C as ce,p as Ze,n as et,D as me,l as v}from"./app-0hD9jktS.js";import{F as tt,_ as st}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_OfVMdc.js";import{_ as at}from"./BaseDataTable.vue_vue_type_style_index_0_lang-CTigQWSr.js";import{_ as V}from"./Label.vue_vue_type_script_setup_true_lang-CLv8w6I-.js";import{_ as je}from"./Input.vue_vue_type_script_setup_true_lang-ByoFr_iA.js";import{_ as ge}from"./InputError.vue_vue_type_script_setup_true_lang-BnFbo3YU.js";import{_ as be}from"./DialogHeader.vue_vue_type_script_setup_true_lang-DOJjbuxF.js";import{B as j}from"./book-open-Dculjk7S.js";import{B as L}from"./building-2-0J7JWYjO.js";import{U as B}from"./users-CQiJNf1m.js";import{P as K}from"./plus-DX8dkZyx.js";import{S as Se}from"./square-pen-QEAPgpV6.js";import{T as se}from"./trash-2-Ctjd7__o.js";import{C as ae}from"./circle-check-big-5ANwAqnJ.js";import{L as re}from"./loader-circle-Dg-d1WoA.js";import{C as rt}from"./clipboard-list-CVjOUuc6.js";import{T as Ce}from"./triangle-alert-dLAnWNBM.js";import{I as Ae}from"./info-DWKpZpD6.js";import"./RovingFocusGroup-BrsbekXI.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DLhJV-ve.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DV00-4L5.js";import"./school-SWVnhMs_.js";import"./chevron-down-Bc9-FnA7.js";import"./check-DytFQTDT.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=$e("AlignLeftIcon",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=$e("HashIcon",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),nt={class:"max-w-7xl mx-auto w-full px-4 py-6 sm:py-8"},it={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},dt={class:"text-2xl sm:text-3xl font-bold text-neutral-900 dark:text-neutral-100 flex items-center gap-3"},ut={class:"mb-6"},ct={class:"md:hidden"},mt={class:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 p-2"},gt={class:"grid grid-cols-3 gap-2"},bt={class:"hidden md:flex gap-1 border border-gray-200 dark:border-neutral-700 rounded-lg p-1 bg-gray-50 dark:bg-neutral-800"},ft={key:0},vt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},xt={class:"text-xl font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2"},pt={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},yt={class:"md:hidden space-y-4"},ht={key:0,class:"text-center py-12"},kt={class:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},_t={class:"flex justify-between items-start mb-3"},wt={class:"flex-1"},jt={class:"font-semibold text-gray-900 dark:text-gray-100 text-lg"},St={key:0,class:"text-sm text-blue-600 dark:text-blue-400 font-medium"},Ct={key:1,class:"text-sm text-gray-600 dark:text-gray-400 mt-2"},At={class:"flex gap-2 ml-4"},$t=["onClick"],Tt=["onClick"],Ft={class:"hidden md:block"},Mt={class:"bg-white dark:bg-neutral-900 rounded-xl shadow border border-gray-200 dark:border-neutral-700 overflow-hidden"},Dt={class:"flex gap-2"},Et=["onClick"],Ut=["onClick"],Nt={key:1},Vt={class:"bg-white dark:bg-neutral-900 rounded-xl shadow border border-gray-200 dark:border-neutral-700 p-6"},Bt={class:"flex items-center gap-3 mb-6"},Pt={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"},Ht={class:"mb-6"},Ot={class:"space-y-4"},Lt=["value"],qt={key:0,class:"space-y-6"},zt={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2"},It={class:"ml-1 font-bold"},Gt={class:"space-y-3"},Rt={class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},Wt={class:"grid md:grid-cols-3 sm:grid-cols-1 lg:grid-cols-4 gap-3"},Qt=["onClick"],Xt={class:"flex-1"},Jt={class:"font-medium text-base"},Kt={key:0,class:"text-sm opacity-75"},Yt={class:"ml-3 flex-shrink-0"},Zt={class:"pt-4"},es={key:1,class:"text-center py-12"},ts={class:"w-20 h-20 mx-auto mb-6 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},ss={key:2},as={class:"bg-white dark:bg-neutral-900 rounded-xl shadow border border-gray-200 dark:border-neutral-700 p-6"},rs={class:"flex items-center gap-3 mb-6"},ls={class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center"},os={class:"bg-gray-50 dark:bg-neutral-800 rounded-xl p-4 mb-6"},ns={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2"},is={class:"space-y-4"},ds={class:"flex flex-col md:flex-row gap-2"},us={class:"flex-1 w-full"},cs=["value"],ms={class:"flex-1 w-full"},gs=["value"],bs={class:"flex-1 w-full"},fs=["value"],vs={class:"pt-2"},xs={class:"mt-4 space-y-2"},ps={key:0,class:"text-sm text-orange-600 bg-orange-50 dark:bg-orange-900/20 p-3 rounded-lg"},ys={key:1,class:"text-sm text-orange-600 bg-orange-50 dark:bg-orange-900/20 p-3 rounded-lg"},hs={class:"space-y-6"},ks={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2"},_s={class:"flex flex-col md:flex-row w-full"},ws=["value"],js={class:"space-y-4"},Ss={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4"},Cs={class:"flex items-center gap-3"},As={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"},$s={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Ts={class:"flex flex-wrap items-center gap-2 mt-1"},Fs={class:"text-sm text-gray-600 dark:text-gray-400"},Ms={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},Ds={key:0,class:"space-y-3"},Es={class:"grid sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3"},Us={class:"flex items-center gap-3"},Ns={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Vs={class:"text-xs text-gray-500 dark:text-gray-400"},Bs=["onClick"],Ps={key:1,class:"text-center py-6"},Hs={class:"w-12 h-12 mx-auto mb-3 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},Os={key:0,class:"text-center py-12"},Ls={class:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},qs={key:0,class:"flex items-center"},zs={key:1,class:"flex items-center"},Is={class:"mb-6"},Gs={class:"flex items-start gap-3 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800"},Rs={class:"font-medium text-red-900 dark:text-red-100 mb-2"},Ws={key:0,class:"flex flex-row items-center gap-2"},Qs={key:1,class:"flex flex-row items-center gap-2"},Xs={class:"mb-6"},Js={class:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},Ks={class:"font-medium text-blue-900 dark:text-blue-100 mb-2"},_a=Qe({__name:"Index",props:{subjects:{},classes:{},teachers:{},assignments:{},teacherAssignments:{}},setup(Te){Xe();const y=Te,h=b(y.subjects?[...y.subjects]:[]),T=b(y.classes?[...y.classes]:[]),S=b(y.teachers?[...y.teachers]:[]),fe=b(y.assignments?[...y.assignments]:[]),le=b(y.teacherAssignments?[...y.teacherAssignments]:[]);C(()=>y.subjects,r=>{h.value=r?[...r]:[]}),C(()=>y.classes,r=>{T.value=r?[...r]:[]}),C(()=>y.teachers,r=>{S.value=r?[...r]:[]}),C(()=>y.assignments,r=>{fe.value=r?[...r]:[]}),C(()=>y.teacherAssignments,r=>{le.value=r?[...r]:[]});const m=b(!1),G=b(!1),q=b(!1),Y=b(null),R=b(!1),z=b(null),p=b("subjects"),W=b(!1),Z=b(""),Q=b(null),f=b(""),E=b(""),P=b(""),X=b("");b([]);const _=b([]),Fe=b([]);H(()=>{if(!f.value)return[];const r=_.value.map(e=>e.id);return h.value.filter(e=>!r.includes(e.id))});const ve=H(()=>{const r=T.value.find(e=>e.id.toString()===f.value.toString());return r?r.name:""});H(()=>{const r=h.value.find(e=>e.id.toString()===E.value.toString());return r?r.name:""});const I=H(()=>_.value.map(r=>r.id)),xe=H(()=>f.value?h.value.filter(r=>I.value.includes(r.id)):[]),pe=H(()=>{const r=le.value,e=new Map;r.forEach(s=>{const c=s.teacher_user_id;if(!e.has(c)){const F=S.value.find(ie=>ie.id===c);F&&e.set(c,{id:F.id,name:F.name,assignments:[]})}e.has(c)&&e.get(c).assignments.push({class_id:s.class_id,class_name:s.class_name,subject_id:s.subject_id,subject_name:s.subject_name,subject_code:s.subject_code})});let i=Array.from(e.values());return X.value&&(i=i.filter(s=>s.id.toString()===X.value.toString())),i});function Me(r){if(I.value.indexOf(r)===-1){const i=h.value.find(s=>s.id===r);i&&_.value.push(i)}else _.value=_.value.filter(i=>i.id!==r)}function De(){if(!f.value){v.error("Please select a class first.");return}const r=T.value.find(s=>s.id.toString()===f.value.toString());if(!r){v.error("Selected class not found. Please select a valid class.");return}const e=_.value.length,i=e===0?`Are you sure you want to remove all subjects from ${r.name}?`:`Are you sure you want to assign ${e} subject${e!==1?"s":""} to ${r.name}?`;ne(i,()=>{m.value=!0,k.post(route("subjects.assign-to-class",f.value.toString()),{subject_ids:_.value.map(s=>s.id)},{preserveScroll:!0,onSuccess:s=>{const c=e===0?`All subjects removed from ${r.name} successfully!`:`${e} subject${e!==1?"s":""} assigned to ${r.name} successfully!`;v.success(c),k.visit(route("subjects.index"),{only:["assignments"],preserveState:!0,preserveScroll:!0,replace:!0})},onError:s=>{const c=s.message||s.error||"Failed to assign subjects";v.error(`Assignment failed: ${c}`)},onFinish:()=>{m.value=!1}})})}C(()=>y.teacherAssignments,r=>{le.value=r?[...r]:[]},{immediate:!0});const x=b({name:"",code:"",description:"",errors:{name:"",code:"",description:""}}),Ee=[{title:"Dashboard",href:"/"},{title:"Subjects",href:"/subjects"}],Ue=[{text:"ID",value:"id"},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Description",value:"description"},{text:"Actions",value:"actions",sortable:!1,slotName:"item-actions"}];function ye(){q.value=!1,x.value={name:"",code:"",description:"",errors:{name:"",code:"",description:""}},G.value=!0}function he(r){q.value=!0,Y.value=r,x.value={name:r.name,code:r.code||"",description:r.description||"",errors:{name:"",code:"",description:""}},G.value=!0}function oe(){G.value=!1,x.value={name:"",code:"",description:"",errors:{name:"",code:"",description:""}},Y.value=null}async function Ne(){m.value=!0,x.value.errors={name:"",code:"",description:""};try{q.value&&Y.value?k.put(route("subjects.update",Y.value.id),{name:x.value.name,code:x.value.code,description:x.value.description},{onSuccess:()=>{oe(),k.visit(route("subjects.index"),{only:["subjects"],preserveState:!0,preserveScroll:!0,replace:!0}),v.success("Subject updated successfully!")},onError:r=>{x.value.errors={name:r.name||"",code:r.code||"",description:r.description||""},console.error("Update errors:",r),v.error(r.message)},onFinish:()=>{m.value=!1}}):k.post(route("subjects.store"),{name:x.value.name,code:x.value.code,description:x.value.description},{onSuccess:()=>{v.success("Subject created successfully!"),oe(),k.visit(route("subjects.index"),{only:["subjects"],preserveState:!0,preserveScroll:!0,replace:!0})},onError:r=>{x.value.errors={name:r.name||"",code:r.code||"",description:r.description||""},v.error(r.message),console.error("Creation errors:",r)},onFinish:()=>{m.value=!1}})}catch(r){console.error("Error in handleSubmit:",r),v.error("An error occurred: "+r.message),m.value=!1}}function ke(r){z.value=r,R.value=!0}async function Ve(){z.value&&(m.value=!0,k.delete(route("subjects.destroy",z.value.id),{onSuccess:()=>{v.success("Subject deleted!"),R.value=!1,z.value=null,k.visit(route("subjects.index"),{only:["subjects"],preserveState:!0,preserveScroll:!0,replace:!0})},onError:()=>{v.error("Failed to delete subject.")},onFinish:()=>{m.value=!1}}))}function Be(){R.value=!1,z.value=null}async function Pe(){k.visit(route("subjects.index"),{only:["assignments"],preserveState:!0,preserveScroll:!0,replace:!0})}async function He(){if(!f.value){_.value=[];return}const r=T.value.find(e=>e.id.toString()===f.value.toString());if(!r){v.error("Selected class not found. Please select a valid class.");return}m.value=!0;try{const e=fe.value.filter(i=>i.class_id.toString()===f.value.toString());_.value=e.map(i=>({id:i.subject_id,name:i.subject_name,code:i.subject_code})),_.value.length>0||v.info(`No subjects currently assigned to ${r.name}`)}catch(e){const i=e.message||"Failed to load assignments";v.error(`Error: ${i}`),_.value=[]}finally{m.value=!1}}C(p,r=>{r==="assignments"?Pe():r==="assign-teachers"&&ee()}),H(()=>Fe.value.map(r=>r.id));function ee(){k.visit(route("subjects.index"),{only:["teacherAssignments"],preserveState:!0,preserveScroll:!0,replace:!0})}function Oe(){if(!f.value||!E.value||!P.value){v.error("Please select class, subject, and teacher.");return}const r=T.value.find(s=>s.id.toString()===f.value.toString()),e=h.value.find(s=>s.id.toString()===E.value.toString()),i=S.value.find(s=>s.id.toString()===P.value.toString());if(!r||!e||!i){v.error("Selected class, subject, or teacher not found. Please select valid options.");return}m.value=!0,k.post(route("subjects.assign-to-teacher"),{class_id:f.value.toString(),subject_id:E.value.toString(),teacher_ids:[i.id]},{preserveScroll:!0,onSuccess:()=>{v.success(`${i.name} assigned to ${e.name} in ${r.name} successfully!`),P.value="",ee()},onError:s=>{const c=s.message||s.error||"Failed to assign teacher";v.error(`Assignment failed: ${c}`)},onFinish:()=>{m.value=!1}})}function Le(r){var i;const e=S.value.find(s=>s.id===r);if(!e||!e.teacher)return"Unknown Teacher";if((i=e.teacher)!=null&&i.class_id){const s=T.value.find(c=>{var F;return c.id===((F=e.teacher)==null?void 0:F.class_id)});if(s)return`Class Teacher of ${s.name}`}return"Subject Teacher"}function qe(r){var i;const e=S.value.find(s=>s.id===r);return!e||!e.teacher?!1:!!((i=e.teacher)!=null&&i.class_id)}function ze(r){const e=S.value.find(s=>s.id===r),i=e?e.name:"Unknown Teacher";ne(`Are you sure you want to remove all assignments for ${i}?`,()=>{m.value=!0,k.post(route("subjects.remove-teacher-assignment"),{teacher_id:r},{onSuccess:()=>{v.success(`All assignments removed for ${i} successfully!`),ee()},onError:s=>{const c=s.message||s.error||"Failed to remove assignments";v.error(`Failed to remove assignments: ${c}`)},onFinish:()=>{m.value=!1}})})}function Ie(r,e,i){var _e,we;const s=S.value.find(U=>U.id===r),c=s?s.name:"Unknown Teacher",F=((_e=T.value.find(U=>U.id===e))==null?void 0:_e.name)||"Unknown Class",ie=((we=h.value.find(U=>U.id===i))==null?void 0:we.name)||"Unknown Subject";ne(`Are you sure you want to remove ${c} from ${ie} in ${F}?`,()=>{m.value=!0,k.post(route("subjects.remove-specific-assignment"),{teacher_id:r,class_id:e,subject_id:i},{onSuccess:()=>{v.success("Assignment removed successfully!"),ee()},onError:U=>{const We=U.message||U.error||"Failed to remove assignment";v.error(`Failed to remove assignment: ${We}`)},onFinish:()=>{m.value=!1}})})}C([f,E],()=>{P.value=""}),C(f,r=>{r?He():_.value=[]}),C(X,(r,e)=>{p.value}),Je(()=>{});function ne(r,e){Z.value=r,Q.value=e,W.value=!0}function Ge(){Q.value&&Q.value(),W.value=!1,Z.value="",Q.value=null}function Re(){W.value=!1,Z.value="",Q.value=null}return(r,e)=>{const i=Ke("can");return o(),N(st,{breadcrumbs:Ee},{default:u(()=>[l(a(Ye),{title:"Subjects Management"}),t("div",nt,[t("div",it,[t("div",null,[t("h1",dt,[l(a(j),{class:"w-8 h-8 text-blue-600"}),e[17]||(e[17]=d(" Subjects Management "))]),e[18]||(e[18]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-2"}," Manage subjects, assign them to classes and teachers ",-1))])]),t("div",ut,[t("div",ct,[t("div",mt,[t("div",gt,[$((o(),n("button",{class:O(["flex flex-col items-center justify-center gap-2 p-4 rounded-lg border-2 transition-all duration-200 font-medium text-sm",p.value==="subjects"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 shadow-sm":"border-gray-200 dark:border-neutral-700 bg-gray-50 dark:bg-neutral-800 text-gray-600 dark:text-gray-400 hover:border-gray-300 dark:hover:border-neutral-600"]),onClick:e[0]||(e[0]=s=>p.value="subjects")},[l(a(j),{class:"w-6 h-6"}),e[19]||(e[19]=t("span",null,"Subjects",-1))],2)),[[i,"read-subjects"]]),$((o(),n("button",{class:O(["flex flex-col items-center justify-center gap-2 p-4 rounded-lg border-2 transition-all duration-200 font-medium text-sm",p.value==="assign-classes"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 shadow-sm":"border-gray-200 dark:border-neutral-700 bg-gray-50 dark:bg-neutral-800 text-gray-600 dark:text-gray-400 hover:border-gray-300 dark:hover:border-neutral-600"]),onClick:e[1]||(e[1]=s=>p.value="assign-classes")},[l(a(L),{class:"w-6 h-6"}),e[20]||(e[20]=t("span",null,"Classes",-1))],2)),[[i,"assign-subjects-to-classes"]]),$((o(),n("button",{class:O(["flex flex-col items-center justify-center gap-2 p-4 rounded-lg border-2 transition-all duration-200 font-medium text-sm",p.value==="assign-teachers"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 shadow-sm":"border-gray-200 dark:border-neutral-700 bg-gray-50 dark:bg-neutral-800 text-gray-600 dark:text-gray-400 hover:border-gray-300 dark:hover:border-neutral-600"]),onClick:e[2]||(e[2]=s=>p.value="assign-teachers")},[l(a(B),{class:"w-6 h-6"}),e[21]||(e[21]=t("span",null,"Teachers",-1))],2)),[[i,"assign-teachers-to-subjects"]])])])]),t("div",bt,[t("button",{class:O(["flex items-center gap-2 px-4 py-3 rounded-md font-medium transition-all",p.value==="subjects"?"bg-white dark:bg-neutral-700 text-blue-600 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"]),onClick:e[3]||(e[3]=s=>p.value="subjects")},[l(a(j),{class:"w-4 h-4"}),e[22]||(e[22]=d(" Subjects "))],2),t("button",{class:O(["flex items-center gap-2 px-4 py-3 rounded-md font-medium transition-all",p.value==="assign-classes"?"bg-white dark:bg-neutral-700 text-blue-600 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"]),onClick:e[4]||(e[4]=s=>p.value="assign-classes")},[l(a(L),{class:"w-4 h-4"}),e[23]||(e[23]=d(" Assign to Classes "))],2),t("button",{class:O(["flex items-center gap-2 px-4 py-3 rounded-md font-medium transition-all",p.value==="assign-teachers"?"bg-white dark:bg-neutral-700 text-blue-600 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"]),onClick:e[5]||(e[5]=s=>p.value="assign-teachers")},[l(a(B),{class:"w-4 h-4"}),e[24]||(e[24]=d(" Assign to Teachers "))],2)])]),p.value==="subjects"?(o(),n("div",ft,[t("div",vt,[t("div",null,[t("h2",xt,[l(a(j),{class:"w-5 h-5 text-blue-600"}),e[25]||(e[25]=d(" All Subjects "))]),t("p",pt,g(h.value.length)+" subject"+g(h.value.length!==1?"s":"")+" available ",1)]),$((o(),N(a(w),{onClick:ye,class:"w-full sm:w-auto px-6 py-3 text-base"},{default:u(()=>[l(a(K),{class:"w-4 h-4 mr-2"}),e[26]||(e[26]=d(" Add Subject "))]),_:1,__:[26]})),[[i,"create-subjects"]])]),t("div",yt,[h.value.length===0?(o(),n("div",ht,[t("div",kt,[l(a(j),{class:"w-8 h-8 text-gray-400"})]),e[28]||(e[28]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"No subjects yet",-1)),e[29]||(e[29]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-4"},"Create your first subject to get started",-1)),l(a(w),{onClick:ye,class:"px-6 py-3"},{default:u(()=>[l(a(K),{class:"w-4 h-4 mr-2"}),e[27]||(e[27]=d(" Add First Subject "))]),_:1,__:[27]})])):(o(!0),n(M,{key:1},D(h.value,s=>(o(),n("div",{key:s.id,class:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-700 p-4"},[t("div",_t,[t("div",wt,[t("h3",jt,g(s.name),1),s.code?(o(),n("p",St,g(s.code),1)):A("",!0),s.description?(o(),n("p",Ct,g(s.description),1)):A("",!0)]),t("div",At,[t("button",{class:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",onClick:c=>he(s),"aria-label":"Edit Subject",title:"Edit Subject"},[l(a(Se),{class:"w-5 h-5"})],8,$t),t("button",{class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",onClick:c=>ke(s),"aria-label":"Delete Subject",title:"Delete Subject"},[l(a(se),{class:"w-5 h-5"})],8,Tt)])])]))),128))]),t("div",Ft,[t("div",Mt,[l(at,{headers:Ue,items:h.value,loading:m.value},{"item-actions":u(s=>[t("div",Dt,[t("button",{class:"inline-flex items-center justify-center rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",onClick:c=>he(s),"aria-label":"Edit Subject",title:"Edit Subject"},[l(a(Se),{class:"w-4 h-4"})],8,Et),t("button",{class:"inline-flex items-center justify-center rounded-lg p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",onClick:c=>ke(s),"aria-label":"Delete Subject",title:"Delete Subject"},[l(a(se),{class:"w-4 h-4"})],8,Ut)])]),_:1},8,["items","loading"])])])])):A("",!0),p.value==="assign-classes"?(o(),n("div",Nt,[t("div",Vt,[t("div",Bt,[t("div",Pt,[l(a(L),{class:"w-5 h-5 text-blue-600"})]),e[30]||(e[30]=t("div",null,[t("h3",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"Assign Subjects to Classes"),t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Select a class to view and manage subject assignments")],-1))]),t("div",Ht,[l(a(V),{for:"classSelect",class:"block mb-3 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(L),{class:"w-4 h-4 inline mr-2"}),e[31]||(e[31]=d(" Select Class ")),e[32]||(e[32]=t("span",{class:"text-red-500"},"*",-1))]),_:1,__:[31,32]}),t("div",Ot,[$(t("select",{id:"classSelect","onUpdate:modelValue":e[6]||(e[6]=s=>f.value=s),class:"w-full p-3 text-sm border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[e[33]||(e[33]=t("option",{value:""},"Choose a class...",-1)),(o(!0),n(M,null,D(T.value,s=>(o(),n("option",{key:s.id,value:s.id},g(s.name),9,Lt))),128))],512),[[J,f.value]])])]),f.value?(o(),n("div",qt,[t("h4",zt,[l(a(j),{class:"w-5 h-5 text-blue-600"}),e[34]||(e[34]=d(" Assign Subjects to ")),t("span",It,g(ve.value),1)]),t("div",Gt,[t("p",Rt," Tap subjects to assign or unassign them to "+g(ve.value),1),t("div",Wt,[(o(!0),n(M,null,D(h.value,s=>(o(),n("button",{key:s.id,type:"button",onClick:c=>Me(s.id),class:O(["flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200 text-left min-h-[60px]",I.value.includes(s.id)?"border-green-500 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 shadow-sm":"border-gray-200 dark:border-neutral-600 bg-white dark:bg-neutral-800 text-gray-700 dark:text-gray-200 hover:border-gray-300 dark:hover:border-neutral-500"])},[t("div",Xt,[t("div",Jt,g(s.name),1),s.code?(o(),n("div",Kt,"("+g(s.code)+")",1)):A("",!0)]),t("div",Yt,[I.value.includes(s.id)?(o(),N(a(ae),{key:0,class:"w-6 h-6 text-green-600"})):(o(),N(a(K),{key:1,class:"w-6 h-6 text-gray-400"}))])],10,Qt))),128))])]),t("div",Zt,[l(a(w),{onClick:De,disabled:!f.value||m.value,class:"w-full px-6 py-3 text-sm font-medium"},{default:u(()=>[m.value?(o(),N(a(re),{key:0,class:"w-5 h-5 mr-3 animate-spin"})):(o(),N(a(ae),{key:1,class:"w-5 h-5 mr-3"})),d(" "+g(m.value?"Saving...":`Save ${I.value.length}
                                Subject${I.value.length!==1?"s":""}`),1)]),_:1},8,["disabled"])])])):(o(),n("div",es,[t("div",ts,[l(a(L),{class:"w-10 h-10 text-gray-400"})]),e[35]||(e[35]=t("h3",{class:"text-xl font-medium text-gray-900 dark:text-gray-100 mb-3"},"Select a Class",-1)),e[36]||(e[36]=t("p",{class:"text-gray-600 dark:text-gray-400 max-w-md mx-auto"}," Choose a class from the dropdown above to view and manage subject assignments ",-1))]))])])):A("",!0),p.value==="assign-teachers"?(o(),n("div",ss,[t("div",as,[t("div",rs,[t("div",ls,[l(a(B),{class:"w-5 h-5 text-green-600"})]),e[37]||(e[37]=t("div",null,[t("h3",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"Assign Subjects to Teachers"),t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Assign specific subjects to teachers for specific classes")],-1))]),t("div",os,[t("h4",ns,[l(a(K),{class:"w-5 h-5 text-blue-600"}),e[38]||(e[38]=d(" Quick Assignment "))]),t("div",is,[t("div",ds,[t("div",us,[l(a(V),{for:"teacherClassSelect",class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(L),{class:"w-4 h-4 inline mr-2"}),e[39]||(e[39]=d(" Select Class ")),e[40]||(e[40]=t("span",{class:"text-red-500"},"*",-1))]),_:1,__:[39,40]}),$(t("select",{id:"teacherClassSelect","onUpdate:modelValue":e[7]||(e[7]=s=>f.value=s),class:"w-full p-3 text-sm border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[e[41]||(e[41]=t("option",{value:""},"Choose a class...",-1)),(o(!0),n(M,null,D(T.value,s=>(o(),n("option",{key:s.id,value:s.id},g(s.name),9,cs))),128))],512),[[J,f.value]])]),t("div",ms,[l(a(V),{for:"teacherSubjectSelect",class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(j),{class:"w-4 h-4 inline mr-2"}),e[42]||(e[42]=d(" Select Subject ")),e[43]||(e[43]=t("span",{class:"text-red-500"},"*",-1))]),_:1,__:[42,43]}),$(t("select",{id:"teacherSubjectSelect","onUpdate:modelValue":e[8]||(e[8]=s=>E.value=s),class:"w-full p-3 text-sm border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[e[44]||(e[44]=t("option",{value:""},"Choose a subject...",-1)),(o(!0),n(M,null,D(xe.value,s=>(o(),n("option",{key:s.id,value:s.id},g(s.name)+" "+g(s.code?`(${s.code})`:""),9,gs))),128))],512),[[J,E.value]])]),t("div",bs,[l(a(V),{for:"teacherSelect",class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(B),{class:"w-4 h-4 inline mr-2"}),e[45]||(e[45]=d(" Select Teacher ")),e[46]||(e[46]=t("span",{class:"text-red-500"},"*",-1))]),_:1,__:[45,46]}),$(t("select",{id:"teacherSelect","onUpdate:modelValue":e[9]||(e[9]=s=>P.value=s),class:"w-full p-3 text-sm border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[e[47]||(e[47]=t("option",{value:""},"Choose a teacher...",-1)),(o(!0),n(M,null,D(S.value,s=>(o(),n("option",{key:s.id,value:s.id},g(s.name),9,fs))),128))],512),[[J,P.value]])])]),t("div",vs,[l(a(w),{onClick:Oe,disabled:!f.value||!E.value||!P.value||m.value,class:"w-full px-4 py-3 text-sm font-medium bg-blue-600 hover:bg-blue-700"},{default:u(()=>[m.value?(o(),N(a(re),{key:1,class:"w-5 h-5 mr-3 animate-spin"})):(o(),N(a(K),{key:0,class:"w-5 h-5 mr-3"})),d(" "+g(m.value?"Assigning...":"Assign Teacher to Subject"),1)]),_:1},8,["disabled"])])]),t("div",xs,[f.value&&xe.value.length===0?(o(),n("p",ps,[l(a(j),{class:"w-4 h-4 inline mr-2"}),e[48]||(e[48]=d(" No subjects assigned to this class yet. Please assign subjects to the class first. "))])):A("",!0),S.value.length===0?(o(),n("p",ys,[l(a(B),{class:"w-4 h-4 inline mr-2"}),e[49]||(e[49]=d(" No teachers available for this school. Please add teachers first. "))])):A("",!0)])]),t("div",hs,[t("h4",ks,[l(a(rt),{class:"w-5 h-5 text-blue-600"}),e[50]||(e[50]=d(" Current Teacher Assignments "))]),t("div",_s,[l(a(V),{for:"teacherFilter",class:"md:w-1/6 block my-2 justify-center items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(B),{class:"w-4 h-4 inline mr-2"}),e[51]||(e[51]=d(" Filter by Teacher "))]),_:1,__:[51]}),$(t("select",{id:"teacherFilter","onUpdate:modelValue":e[10]||(e[10]=s=>X.value=s),class:"md:w-2/6 p-3 text-sm border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[e[52]||(e[52]=t("option",{value:""},"All Teachers",-1)),(o(!0),n(M,null,D(S.value,s=>(o(),n("option",{key:s.id,value:s.id},g(s.name),9,ws))),128))],512),[[J,X.value]])]),t("div",js,[(o(!0),n(M,null,D(pe.value,s=>(o(),n("div",{key:s.id,class:"bg-white dark:bg-neutral-900 rounded-xl p-4 border border-gray-200 dark:border-neutral-700 shadow-sm"},[t("div",Ss,[t("div",Cs,[t("div",As,[l(a(B),{class:"w-6 h-6 text-blue-600"})]),t("div",null,[t("h5",$s,g(s.name),1),t("div",Ts,[t("p",Fs,g(Le(s.id)),1),qe(s.id)?(o(),n("span",Ms,[l(a(L),{class:"w-3 h-3 mr-1"}),e[53]||(e[53]=d(" Class Teacher "))])):A("",!0)])])]),l(a(w),{onClick:c=>ze(s.id),variant:"outline",size:"sm",class:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300 px-4 py-2"},{default:u(()=>[l(a(se),{class:"w-4 h-4 mr-2"}),e[54]||(e[54]=d(" Remove All "))]),_:2,__:[54]},1032,["onClick"])]),s.assignments.length>0?(o(),n("div",Ds,[e[55]||(e[55]=t("h6",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Assigned Subjects: ",-1)),t("div",Es,[(o(!0),n(M,null,D(s.assignments,c=>(o(),n("div",{key:`${c.class_id}-${c.subject_id}`,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-neutral-800 rounded-lg border border-gray-200 dark:border-neutral-600"},[t("div",Us,[l(a(j),{class:"w-5 h-5 text-blue-600 flex-shrink-0"}),t("div",null,[t("span",Ns,g(c.subject_name),1),t("div",Vs," in "+g(c.class_name),1)])]),t("button",{onClick:F=>Ie(s.id,c.class_id,c.subject_id),class:"ml-3 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors"},[l(a(te),{class:"w-4 h-4"})],8,Bs)]))),128))])])):(o(),n("div",Ps,[t("div",Hs,[l(a(j),{class:"w-6 h-6 text-gray-400"})]),e[56]||(e[56]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," No subjects assigned yet. ",-1))]))]))),128))]),pe.value.length===0?(o(),n("div",Os,[t("div",Ls,[l(a(B),{class:"w-8 h-8 text-gray-400"})]),e[57]||(e[57]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"}," No teacher assignments yet ",-1)),e[58]||(e[58]=t("p",{class:"text-gray-600 dark:text-gray-400"}," Use the form above to assign subjects to teachers ",-1))])):A("",!0)])])])):A("",!0)]),l(a(de),{open:G.value,"onUpdate:open":e[14]||(e[14]=s=>G.value=s)},{default:u(()=>[l(a(ue),{class:"sm:max-w-md max-w-[95vw] mx-4"},{default:u(()=>[l(a(be),null,{default:u(()=>[l(a(ce),{class:"flex items-center gap-2"},{default:u(()=>[l(a(j),{class:"w-5 h-5 text-blue-600"}),d(" "+g(q.value?"Edit Subject":"Add New Subject"),1)]),_:1})]),_:1}),t("form",{onSubmit:Ze(Ne,["prevent"]),class:"space-y-6"},[t("div",null,[l(a(V),{for:"name",class:"block mb-3 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(tt),{class:"w-4 h-4 inline mr-2"}),e[59]||(e[59]=d(" Subject Name ")),e[60]||(e[60]=t("span",{class:"text-red-500"},"*",-1))]),_:1,__:[59,60]}),l(a(je),{id:"name",modelValue:x.value.name,"onUpdate:modelValue":e[11]||(e[11]=s=>x.value.name=s),type:"text",required:"",placeholder:"e.g., Mathematics, English, Science",class:"w-full p-3 text-sm border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,8,["modelValue"]),l(ge,{message:x.value.errors.name},null,8,["message"])]),t("div",null,[l(a(V),{for:"code",class:"block mb-3 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(ot),{class:"w-4 h-4 inline mr-2"}),e[61]||(e[61]=d(" Subject Code "))]),_:1,__:[61]}),l(a(je),{id:"code",modelValue:x.value.code,"onUpdate:modelValue":e[12]||(e[12]=s=>x.value.code=s),type:"text",required:"",placeholder:"e.g., MATH101, ENG201",class:"w-full p-3 text-sm border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,8,["modelValue"]),l(ge,{message:x.value.errors.code},null,8,["message"]),e[62]||(e[62]=t("p",{class:"text-xs text-gray-500 mt-2"},"A short code to identify the subject (e.g., MATH101, ENG201)",-1))]),t("div",null,[l(a(V),{for:"description",class:"block mb-3 text-sm font-medium text-gray-700 dark:text-gray-300"},{default:u(()=>[l(a(lt),{class:"w-4 h-4 inline mr-2"}),e[63]||(e[63]=d(" Description "))]),_:1,__:[63]}),$(t("textarea",{id:"description","onUpdate:modelValue":e[13]||(e[13]=s=>x.value.description=s),class:"w-full p-3 text-sm border border-gray-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",rows:"4",placeholder:"Brief description of the subject (optional)"},null,512),[[et,x.value.description]]),l(ge,{message:x.value.errors.description},null,8,["message"]),e[64]||(e[64]=t("p",{class:"text-xs text-gray-500 mt-2"},"Optional: Provide additional details about the subject",-1))]),l(a(me),{class:"flex flex-col sm:flex-row gap-3 pt-4"},{default:u(()=>[l(a(w),{type:"button",variant:"outline",onClick:oe,class:"w-full sm:w-auto px-6 py-3 text-base"},{default:u(()=>[l(a(te),{class:"w-4 h-4 mr-2"}),e[65]||(e[65]=d(" Cancel "))]),_:1,__:[65]}),l(a(w),{disabled:m.value,class:"w-full sm:w-auto px-3 py-3 text-base"},{default:u(()=>[m.value?(o(),n("span",qs,[l(a(re),{class:"w-4 h-4 mr-2 animate-spin"}),d(" "+g(q.value?"Updating...":"Creating..."),1)])):(o(),n("span",zs,[l(a(ae),{class:"w-4 h-4 mr-2"}),d(" "+g(q.value?"Update Subject":"Create Subject"),1)]))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(a(de),{open:R.value,"onUpdate:open":e[15]||(e[15]=s=>R.value=s)},{default:u(()=>[l(a(ue),{class:"sm:max-w-md max-w-[95vw] mx-4"},{default:u(()=>{var s;return[l(a(be),null,{default:u(()=>[l(a(ce),{class:"flex items-center gap-2"},{default:u(()=>[l(a(Ce),{class:"w-5 h-5 text-red-600"}),e[66]||(e[66]=d(" Delete Subject? "))]),_:1,__:[66]})]),_:1}),t("div",Is,[t("div",Gs,[l(a(Ce),{class:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),t("div",null,[t("p",Rs,[e[67]||(e[67]=d(' Are you sure you want to delete "')),t("strong",null,g((s=z.value)==null?void 0:s.name),1),e[68]||(e[68]=d('"? '))]),e[69]||(e[69]=t("p",{class:"text-sm text-red-700 dark:text-red-300"}," This action cannot be undone. The subject will be permanently removed from the system. ",-1))])])]),l(a(me),{class:"flex flex-col sm:flex-row gap-3"},{default:u(()=>[l(a(w),{variant:"outline",onClick:Be,class:"w-full sm:w-auto px-6 py-3 text-base"},{default:u(()=>[l(a(te),{class:"w-4 h-4 mr-2"}),e[70]||(e[70]=d(" Cancel "))]),_:1,__:[70]}),l(a(w),{variant:"destructive",onClick:Ve,class:"w-full sm:w-auto px-6 py-3 text-base"},{default:u(()=>[m.value?(o(),n("span",Ws,[l(a(re),{class:"w-4 h-4 mr-2 animate-spin"}),e[71]||(e[71]=d(" Deleting... "))])):(o(),n("span",Qs,[l(a(se),{class:"w-4 h-4 mr-2"}),e[72]||(e[72]=d(" Delete Subject "))]))]),_:1})]),_:1})]}),_:1})]),_:1},8,["open"]),l(a(de),{open:W.value,"onUpdate:open":e[16]||(e[16]=s=>W.value=s)},{default:u(()=>[l(a(ue),{class:"sm:max-w-md max-w-[95vw] mx-4"},{default:u(()=>[l(a(be),null,{default:u(()=>[l(a(ce),{class:"flex items-center gap-2"},{default:u(()=>[l(a(Ae),{class:"w-5 h-5 text-blue-600"}),e[73]||(e[73]=d(" Confirm Action "))]),_:1,__:[73]})]),_:1}),t("div",Xs,[t("div",Js,[l(a(Ae),{class:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),t("div",null,[t("p",Ks,g(Z.value),1),e[74]||(e[74]=t("p",{class:"text-sm text-blue-700 dark:text-blue-300"}," This action cannot be undone. ",-1))])])]),l(a(me),{class:"flex flex-col sm:flex-row gap-3"},{default:u(()=>[l(a(w),{variant:"outline",onClick:Re,class:"w-full sm:w-auto px-6 py-3 text-base"},{default:u(()=>[l(a(te),{class:"w-4 h-4 mr-2"}),e[75]||(e[75]=d(" Cancel "))]),_:1,__:[75]}),l(a(w),{variant:"default",onClick:Ge,class:"w-full sm:w-auto px-6 py-3 text-base"},{default:u(()=>[l(a(ae),{class:"w-4 h-4 mr-2"}),e[76]||(e[76]=d(" Confirm "))]),_:1,__:[76]})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}});export{_a as default};
