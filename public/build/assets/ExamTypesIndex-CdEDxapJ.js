import{d as Y,r as u,w as H,G as J,y as L,b as V,o as v,e as l,f as a,g as i,u as s,h as P,k as y,_ as c,j as r,i as N,A as Q,t as C,E as F,B,C as S,p as R,K as X,D as U,W as d,l as b}from"./app-oDzFbDpS.js";import{_ as Z}from"./BaseDataTable.vue_vue_type_style_index_0_lang-dE9UHpEE.js";import{_ as $}from"./Label.vue_vue_type_script_setup_true_lang-BphRAz40.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-CJXbLAqT.js";import{_ as M}from"./InputError.vue_vue_type_script_setup_true_lang-DL9oimPF.js";import{_ as j}from"./DialogHeader.vue_vue_type_script_setup_true_lang-BpgOtXzy.js";import{_ as I}from"./Icon.vue_vue_type_script_setup_true_lang-CktM08l_.js";import{_ as ee}from"./ManageLayout.vue_vue_type_script_setup_true_lang-3BtKD-jU.js";import"./loader-circle-Dd3mNCCo.js";import"./chevron-down-SN-issHr.js";import"./check-CEIiCWnz.js";import"./building-2-Dp0U14zc.js";import"./target-BvkpxWi2.js";import"./triangle-alert-DX_7JuLF.js";import"./refresh-cw-CWAu1Of8.js";import"./save-BhC_gGhx.js";import"./plus-DaPcSaFA.js";import"./arrow-right-Dpm9A9Fy.js";import"./arrow-left-DCJF3lDn.js";import"./eye-off-ByIEJSqi.js";import"./eye-DjBiqAnr.js";import"./shield-CQ-AXaLs.js";import"./square-pen-D5JRiJpv.js";import"./info-Cu4eEvQq.js";import"./calendar-NzJ3-Hzp.js";import"./house-CZga5bkn.js";import"./book-open-NJHJ4pEX.js";import"./trash-Byk8sBRk.js";import"./users-DDnJbTSp.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-B8xcv65_.js";import"./RovingFocusGroup-CLnOwjDo.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DPNLz3sn.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cob2K5o9.js";import"./school-T4gwIvXC.js";import"./clipboard-list-BsqG52_M.js";const te={class:"max-w-4xl mx-auto w-full px-2 sm:px-4 md:px-0 py-8"},ae={class:"flex justify-between items-center mb-6"},le=["onClick"],se=["disabled","title"],oe={class:"mb-4 flex flex-col gap-2"},ne={class:"mb-4 flex flex-col gap-2"},ie={class:"mb-4 flex items-center gap-2"},Oe=Y({__name:"ExamTypesIndex",props:{examTypes:{}},setup(q){const k=q,D=u(k.examTypes??[]);H(()=>k.examTypes,n=>{n&&(D.value=[...n])});const m=u(!1),f=u(!1),p=u(!1),g=u(null),x=u(!1),_=u(null),t=J({id:null,name:"",code:"",is_final_term:!1,errors:{}}),z=[{text:"ID",value:"id"},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Final Term",value:"is_final_term",sortable:!1,slotName:"item-is_final_term"},{text:"Actions",value:"actions",sortable:!1,slotName:"item-actions"}];function W(){p.value=!1,g.value=null,w(),f.value=!0}function h(n){p.value=!0,g.value=n,t.id=n.id,t.name=n.name,t.code=n.code,t.is_final_term=!!n.is_final_term,t.errors={},f.value=!0}function w(){t.id=null,t.name="",t.code="",t.is_final_term=!1,t.errors={}}function T(){f.value=!1,g.value=null,w()}function G(){m.value=!0,t.errors={};const n={name:t.name,code:t.code,is_final_term:t.is_final_term};p.value&&t.id!==null?d.put(`/exam-types/${t.id}`,n,{onSuccess:()=>{b.success("Exam Type updated!"),T(),d.reload({only:["examTypes"]})},onError:e=>{t.errors=e},onFinish:()=>{m.value=!1}}):d.post("/exam-types",n,{onSuccess:()=>{b.success("Exam Type created!"),T(),d.reload({only:["examTypes"]})},onError:e=>{t.errors=e},onFinish:()=>{m.value=!1}})}function K(){_.value&&(m.value=!0,d.delete(`/exam-types/${_.value.id}`,{onSuccess:()=>{b.success("Exam type deleted!"),x.value=!1,_.value=null,d.reload({only:["examTypes"]})},onError:()=>{b.error("Failed to delete exam type.")},onFinish:()=>{m.value=!1,_.value=null}}))}function O(){x.value=!1,_.value=null}return(n,e)=>{const E=L("can");return v(),V(ee,null,{default:l(()=>[a(s(P),{title:"Exam Types"}),i("div",te,[i("div",ae,[e[6]||(e[6]=i("h1",{class:"text-2xl font-bold text-neutral-900 dark:text-neutral-100"},"Exam Types",-1)),y((v(),V(s(c),{variant:"default",size:"lg",onClick:W},{default:l(()=>e[5]||(e[5]=[r(" Add Exam Type ")])),_:1,__:[5]})),[[E,"create-exam-types"]])]),a(Z,{headers:z,items:D.value,loading:m.value,class:"bg-white dark:bg-neutral-900 rounded-xl shadow border border-gray-200 dark:border-neutral-700"},{"item-is_final_term":l(o=>[i("span",{class:Q(o.is_final_term?"text-green-800":"text-gray-500")},C(o.is_final_term?"Yes":"No"),3)]),"item-actions":l(o=>[y((v(),N("button",{class:"inline-flex items-center justify-center rounded-full p-2 text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400 mr-1",onClick:re=>h(o),"aria-label":"Edit Exam Type",title:"Edit"},[a(I,{name:"edit",class:"w-5 h-5"})],8,le)),[[E,"update-exam-types"]]),y((v(),N("button",{disabled:o.exams_count>0,class:"inline-flex items-center justify-center rounded-full p-2 text-red-300 cursor-not-allowed",title:o.exams_count>0?`${o.exams_count} exams exist for this type.`:"Delete exam type"},[a(I,{name:"trash",class:"w-5 h-5"})],8,se)),[[E,"delete-exam-types"]])]),_:1},8,["items","loading"])]),a(s(F),{open:f.value,"onUpdate:open":e[3]||(e[3]=o=>f.value=o)},{default:l(()=>[a(s(B),null,{default:l(()=>[a(s(j),null,{default:l(()=>[a(s(S),null,{default:l(()=>[r(C(p.value?"Edit Exam Type":"Add Exam Type"),1)]),_:1})]),_:1}),i("form",{onSubmit:R(G,["prevent"])},[i("div",oe,[a(s($),{for:"name"},{default:l(()=>e[7]||(e[7]=[r("Name")])),_:1,__:[7]}),a(s(A),{id:"name",modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),type:"text",required:"",placeholder:"e.g., 1st Term"},null,8,["modelValue"]),a(M,{message:t.errors.name},null,8,["message"])]),i("div",ne,[a(s($),{for:"code"},{default:l(()=>e[8]||(e[8]=[r("Code")])),_:1,__:[8]}),a(s(A),{id:"code",modelValue:t.code,"onUpdate:modelValue":e[1]||(e[1]=o=>t.code=o),type:"text",required:"",placeholder:"e.g., 1st_term"},null,8,["modelValue"]),a(M,{message:t.errors.code},null,8,["message"])]),i("div",ie,[y(i("input",{id:"is_final_term",type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=o=>t.is_final_term=o)},null,512),[[X,t.is_final_term]]),a(s($),{for:"is_final_term"},{default:l(()=>e[9]||(e[9]=[r("Is Final Term?")])),_:1,__:[9]})]),a(s(U),null,{default:l(()=>[a(s(c),{type:"button",variant:"outline",onClick:T},{default:l(()=>e[10]||(e[10]=[r("Cancel")])),_:1,__:[10]}),a(s(c),{disabled:m.value},{default:l(()=>[r(C(p.value?"Update":"Create"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),a(s(F),{open:x.value,"onUpdate:open":e[4]||(e[4]=o=>x.value=o)},{default:l(()=>[a(s(B),null,{default:l(()=>[a(s(j),null,{default:l(()=>[a(s(S),null,{default:l(()=>e[11]||(e[11]=[r("Delete Exam Type?")])),_:1,__:[11]})]),_:1}),e[14]||(e[14]=i("div",{class:"mb-4"},"Are you sure you want to delete this exam type?",-1)),a(s(U),null,{default:l(()=>[a(s(c),{variant:"outline",onClick:O},{default:l(()=>e[12]||(e[12]=[r("Cancel")])),_:1,__:[12]}),a(s(c),{variant:"destructive",onClick:K},{default:l(()=>e[13]||(e[13]=[r("Delete")])),_:1,__:[13]})]),_:1})]),_:1,__:[14]})]),_:1},8,["open"])]),_:1})}}});export{Oe as default};
