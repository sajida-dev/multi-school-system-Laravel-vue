import{d as j,r as c,c as N,w as F,i as h,o as v,z as w,g as a,j as f,t as C,f as o,p as y,A as U,x as G,L as T,H as q,b as L,e as g,u as l,h as R,_ as M,W as B,l as D}from"./app-0hD9jktS.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_OfVMdc.js";import{_ as z}from"./Label.vue_vue_type_script_setup_true_lang-CLv8w6I-.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-ByoFr_iA.js";import{_ as I}from"./InputError.vue_vue_type_script_setup_true_lang-BnFbo3YU.js";import{u as W}from"./school-SWVnhMs_.js";import{_ as E}from"./Icon.vue_vue_type_script_setup_true_lang-DgG5U0yt.js";import{_ as H}from"./AvatarUpload.vue_vue_type_script_setup_true_lang-_vcVYeDj.js";import"./RovingFocusGroup-BrsbekXI.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DLhJV-ve.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DV00-4L5.js";import"./building-2-0J7JWYjO.js";import"./users-CQiJNf1m.js";import"./chevron-down-Bc9-FnA7.js";import"./check-DytFQTDT.js";import"./loader-circle-Dg-d1WoA.js";import"./target-nv-k3IQz.js";import"./triangle-alert-dLAnWNBM.js";import"./refresh-cw-DBp2ONfo.js";import"./save-DvCxJJrq.js";import"./plus-DX8dkZyx.js";import"./arrow-right-yGz9ZWmd.js";import"./arrow-left-B5cZ3DqQ.js";import"./eye-off-B84CHv0x.js";import"./eye-Dtz9j6o0.js";import"./shield-BxF9Ptyz.js";import"./square-pen-QEAPgpV6.js";import"./info-DWKpZpD6.js";import"./calendar-DjniW4jB.js";import"./house-D65vkcx-.js";import"./book-open-Dculjk7S.js";import"./trash-hGn8IamB.js";const Z={class:"flex flex-col w-full"},K={key:0,class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},O={key:0,class:"text-red-500"},Q={class:"flex flex-col items-center justify-center py-8"},X={class:"text-xs text-gray-500 dark:text-gray-400"},Y=["accept"],ee={key:1,class:"mt-4 flex justify-center"},te=["src","alt"],ae={key:2,class:"text-xs text-red-500 mt-1"},se=j({__name:"ImageUpload",props:{modelValue:File,label:String,hint:String,required:Boolean,accept:{type:String,default:"image/*"},maxSizeMB:{type:Number,default:2},preview:String,width:{type:[String,Number],default:640},height:{type:[String,Number],default:256}},emits:["update:modelValue","update:preview"],setup(u,{emit:_}){const s=u,p=_,x=c(null),n=c(!1),m=c(""),i=c(s.preview||""),b=N(()=>typeof s.width=="string"?`w-full ${s.width}`:"w-full"),S=N(()=>typeof s.width=="number"&&typeof s.height=="number"?`max-w-[${s.width}px] h-[${s.height}px]`:"w-full");function k(){var t;(t=x.value)==null||t.click()}function $(t){const r=t.target.files;r&&r[0]&&e(r[0])}function d(t){n.value=!1,t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files[0]&&e(t.dataTransfer.files[0])}function e(t){if(m.value="",!t.type.startsWith("image/")){m.value="Please select a valid image file";return}if(t.size>s.maxSizeMB*1024*1024){m.value=`Image size must be less than ${s.maxSizeMB}MB`;return}const r=new FileReader;r.onload=V=>{var P;i.value=(P=V.target)==null?void 0:P.result,p("update:preview",i.value)},r.readAsDataURL(t),p("update:modelValue",t)}return F(()=>s.preview,t=>{t&&(i.value=t)}),(t,r)=>(v(),h("div",Z,[u.label?(v(),h("label",K,[f(C(u.label),1),u.required?(v(),h("span",O,"*")):w("",!0)])):w("",!0),a("div",{class:U(["flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 dark:border-neutral-600 rounded-lg cursor-pointer bg-gray-50 dark:bg-neutral-800 hover:bg-gray-100 dark:hover:bg-neutral-700 transition",[n.value?"border-purple-400 dark:border-purple-500":"",b.value]]),onClick:k,onDragover:r[0]||(r[0]=y(V=>n.value=!0,["prevent"])),onDragleave:r[1]||(r[1]=y(V=>n.value=!1,["prevent"])),onDrop:y(d,["prevent"])},[a("div",Q,[o(E,{name:"Upload",class:"w-10 h-10 mb-3 text-gray-400 dark:text-gray-500"}),r[2]||(r[2]=a("p",{class:"mb-2 text-base text-gray-500 dark:text-gray-400"},[a("span",{class:"font-semibold"},"Click to upload"),f(" or drag and drop ")],-1)),a("p",X,C(u.hint||"PNG, JPG up to 2MB"),1)]),a("input",{ref_key:"fileInput",ref:x,type:"file",accept:u.accept,class:"hidden",onChange:$},null,40,Y)],34),i.value?(v(),h("div",ee,[a("img",{src:i.value,alt:u.label||"Image Preview",class:U(["object-cover border rounded-lg shadow",S.value])},null,10,te)])):w("",!0),m.value?(v(),h("div",ae,C(m.value),1)):w("",!0)]))}}),le={class:"max-w-5xl mx-auto w-full px-2 sm:px-4 md:px-0 py-8"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},re={class:"flex flex-col gap-6"},ne={class:"flex flex-col gap-4"},ie={class:"flex flex-col gap-6 items-center justify-center"},de={class:"flex flex-col items-center gap-2"},ue={class:"flex flex-col items-center justify-center w-full"},me={class:"w-full"},ce={class:"flex flex-col md:flex-row items-center justify-end gap-4 mt-10"},We=j({__name:"Create",setup(u){const _=[{title:"Schools",href:"/schools"},{title:"Add School",href:"/schools/create"}],s=G({name:"",address:"",contact:""}),p=c(),x=c(""),n=c(),m=c(""),i=W(),{schools:b}=T(i),S=N(()=>Array.isArray(b.value)?b.value:[]);q(()=>{S.value.length||i.fetchSchools()});function k(){const d=new FormData;d.append("name",s.name),d.append("address",s.address),d.append("contact",s.contact),p.value&&d.append("logo",p.value),n.value&&d.append("main_image",n.value),B.post(route("schools.store"),d,{forceFormData:!0,onSuccess:async e=>{D.success("School created successfully."),await i.fetchSchools(),B.visit(route("schools.index"))},onError:()=>{D.error("Please fix the errors and try again.")}})}const $=()=>{B.visit(route("schools.index"))};return(d,e)=>(v(),L(J,{breadcrumbs:_},{default:g(()=>[o(l(R),{title:"Add School"}),a("div",le,[e[13]||(e[13]=a("h1",{class:"text-2xl font-bold mb-8 text-neutral-900 dark:text-neutral-100"},"Add School",-1)),a("form",{onSubmit:y(k,["prevent"]),class:"bg-white dark:bg-neutral-900 p-8 rounded-xl border border-gray-200 dark:border-neutral-700 shadow-md w-full"},[a("div",oe,[a("div",re,[a("div",null,[e[10]||(e[10]=a("h2",{class:"text-lg font-semibold mb-4 text-neutral-800 dark:text-neutral-200"},"School Information",-1)),a("div",ne,[a("div",null,[o(l(z),{class:"mb-1 ml-1",for:"name"},{default:g(()=>e[7]||(e[7]=[f("Name"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[7]}),o(l(A),{id:"name",modelValue:l(s).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(s).name=t),required:"",placeholder:"School name (letters, numbers, spaces, hyphens, periods only)",autocomplete:"off",pattern:"[a-zA-Z0-9\\s\\-\\.]+",title:"Letters, numbers, spaces, hyphens, and periods only"},null,8,["modelValue"]),o(I,{class:"mt-2",message:l(s).errors.name},null,8,["message"])]),a("div",null,[o(l(z),{class:"mb-1 ml-1",for:"address"},{default:g(()=>e[8]||(e[8]=[f("Address"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[8]}),o(l(A),{id:"address",modelValue:l(s).address,"onUpdate:modelValue":e[1]||(e[1]=t=>l(s).address=t),required:"",placeholder:"School address (minimum 10 characters)",autocomplete:"off",minlength:"10",maxlength:"500",title:"Address must be at least 10 characters long"},null,8,["modelValue"]),o(I,{class:"mt-2",message:l(s).errors.address},null,8,["message"])]),a("div",null,[o(l(z),{class:"mb-1 ml-1",for:"contact"},{default:g(()=>e[9]||(e[9]=[f("Contact"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[9]}),o(l(A),{id:"contact",modelValue:l(s).contact,"onUpdate:modelValue":e[2]||(e[2]=t=>l(s).contact=t),required:"",placeholder:"Contact number e.g. 03001234567 or +923001234567",autocomplete:"off",pattern:"[\\d\\s\\-\\+\\(\\)]{7,20}",title:"7-20 digits, may include spaces, dashes, plus signs, and parentheses"},null,8,["modelValue"]),o(I,{class:"mt-2",message:l(s).errors.contact},null,8,["message"])])])])]),a("div",ie,[a("div",null,[a("div",de,[o(H,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=t=>p.value=t),preview:x.value,"onUpdate:preview":e[4]||(e[4]=t=>x.value=t),label:"Logo",hint:"PNG, JPG up to 1MB","max-size-m-b":1,width:150,height:150},null,8,["modelValue","preview"])])])])]),a("div",ue,[a("div",me,[o(se,{modelValue:n.value,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value=t),preview:m.value,"onUpdate:preview":e[6]||(e[6]=t=>m.value=t),label:"Main Image",hint:"PNG, JPG up to 2MB","max-size-m-b":2,width:640,height:256},null,8,["modelValue","preview"])])]),a("div",ce,[o(l(M),{type:"button",variant:"outline",onClick:$},{default:g(()=>e[11]||(e[11]=[f("Cancel")])),_:1,__:[11]}),o(l(M),{disabled:l(s).processing},{default:g(()=>e[12]||(e[12]=[f("Save")])),_:1,__:[12]},8,["disabled"])])],32)])]),_:1}))}});export{We as default};
