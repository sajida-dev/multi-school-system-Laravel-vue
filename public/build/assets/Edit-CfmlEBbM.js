import{d as z,s as G,r as H,L as J,c as n,x as L,H as Y,b as f,o as b,e as h,f as t,g as i,u as l,h as K,p as Q,z as $,_ as R,j as B,W as V}from"./app-0hD9jktS.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_OfVMdc.js";import{a as s,_ as u}from"./SelectInput-C8qFFp1m.js";import{_ as Z}from"./FileInput-kSoIAmJU.js";import{u as ee}from"./school-SWVnhMs_.js";import"./RovingFocusGroup-BrsbekXI.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DLhJV-ve.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DV00-4L5.js";import"./building-2-0J7JWYjO.js";import"./users-CQiJNf1m.js";import"./chevron-down-Bc9-FnA7.js";import"./check-DytFQTDT.js";import"./Label.vue_vue_type_script_setup_true_lang-CLv8w6I-.js";import"./Input.vue_vue_type_script_setup_true_lang-ByoFr_iA.js";import"./InputError.vue_vue_type_script_setup_true_lang-BnFbo3YU.js";const re={class:"max-w-4xl mx-auto w-full px-2 sm:px-4 md:px-0 py-8"},le={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},oe={class:"md:col-span-3"},ae={class:"mt-8 flex gap-2 justify-end"},ve=z({__name:"Edit",setup(te){var q,A,C,w,T,k,j,E,D,M,N;const _=G(),a=_.props.teacher,F=H(_.props.roles||[]),g=ee(),{schools:y,selectedSchool:P,classes:v,sections:x}=J(g),m=n(()=>Array.isArray(y.value)?y.value:[]),U=n(()=>Array.isArray(v.value)?v.value:[]);n(()=>Array.isArray(x.value)?x.value:[]);const p=n(()=>P.value),e=L({profile_photo:null,name:a.name||"",email:a.email||"",username:a.username||"",cnic:((q=a.teacher)==null?void 0:q.cnic)||"",gender:((A=a.teacher)==null?void 0:A.gender)||"",marital_status:((C=a.teacher)==null?void 0:C.marital_status)||"",role_id:((w=a.teacher)==null?void 0:w.role_id)||"",dob:((T=a.teacher)==null?void 0:T.dob)||"",salary:((k=a.teacher)==null?void 0:k.salary)||"",phone_number:a.phone_number||"",date_of_joining:((j=a.teacher)==null?void 0:j.date_of_joining)||"",experience_years:((E=a.teacher)==null?void 0:E.experience_years)||"",school_id:((D=a.teacher)==null?void 0:D.school_id)||((M=p.value)==null?void 0:M.id)||"",class_id:((N=a.teacher)==null?void 0:N.class_id)||""}),I=[{title:"Dashboard",href:"/"},{title:"Teachers",href:"/teachers"},{title:"Edit Teacher",href:`/teachers/${a.id}/edit`}],S=n(()=>p.value?Array.isArray(U.value)?U.value.filter(d=>{var o,r;return((o=d.pivot)==null?void 0:o.school_id)==((r=p.value)==null?void 0:r.id)}):[]:[]);Y(()=>{m.value.length||g.fetchSchools()});function O(){const d=new FormData,o=e.data();Object.keys(o).forEach(r=>{const c=o[r];c!=null&&d.append(r,c)}),d.append("_method","PUT"),V.post(`/teachers/${a.id}`,d,{forceFormData:!0,onSuccess:()=>{V.visit("/teachers")},onError:r=>{console.error("Form errors:",r)}})}function W(){V.visit("/teachers")}return(d,o)=>(b(),f(X,{breadcrumbs:I},{default:h(()=>[t(l(K),{title:"Edit Teacher"}),i("div",re,[o[17]||(o[17]=i("h1",{class:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100"},"Edit Teacher",-1)),i("form",{onSubmit:Q(O,["prevent"]),class:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-700 rounded-lg shadow-lg p-6"},[i("div",le,[t(s,{label:"Teacher Name",modelValue:l(e).name,"onUpdate:modelValue":o[0]||(o[0]=r=>l(e).name=r),error:l(e).errors.name,required:"",placeholder:"e.g. Ahmed Ali"},null,8,["modelValue","error"]),t(s,{label:"Teacher CNIC",modelValue:l(e).cnic,"onUpdate:modelValue":o[1]||(o[1]=r=>l(e).cnic=r),error:l(e).errors.cnic,required:"",placeholder:"e.g. 12345-1234567-1"},null,8,["modelValue","error"]),t(s,{label:"Username",modelValue:l(e).username,"onUpdate:modelValue":o[2]||(o[2]=r=>l(e).username=r),error:l(e).errors.username,required:"",placeholder:"e.g. teacher"},null,8,["modelValue","error"]),t(s,{label:"Email",modelValue:l(e).email,"onUpdate:modelValue":o[3]||(o[3]=r=>l(e).email=r),error:l(e).errors.email,required:"",type:"email",placeholder:"e.g. teacher@email.com"},null,8,["modelValue","error"]),t(u,{label:"Gender",modelValue:l(e).gender,"onUpdate:modelValue":o[4]||(o[4]=r=>l(e).gender=r),error:l(e).errors.gender,required:"",options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}]},null,8,["modelValue","error"]),t(u,{label:"Marital Status",modelValue:l(e).marital_status,"onUpdate:modelValue":o[5]||(o[5]=r=>l(e).marital_status=r),error:l(e).errors.marital_status,required:"",options:[{label:"Single",value:"Single"},{label:"Married",value:"Married"}]},null,8,["modelValue","error"]),t(u,{label:"Select Role",modelValue:l(e).role_id,"onUpdate:modelValue":o[6]||(o[6]=r=>l(e).role_id=r),error:l(e).errors.role_id,required:"",options:F.value.map(r=>({label:r.name.charAt(0).toUpperCase()+r.name.slice(1),value:r.id}))},null,8,["modelValue","error","options"]),t(s,{label:"Date of Birth",modelValue:l(e).dob,"onUpdate:modelValue":o[7]||(o[7]=r=>l(e).dob=r),error:l(e).errors.dob,required:"",type:"date",placeholder:"mm/dd/yyyy"},null,8,["modelValue","error"]),t(s,{label:"Salary",modelValue:l(e).salary,"onUpdate:modelValue":o[8]||(o[8]=r=>l(e).salary=r),error:l(e).errors.salary,required:"",type:"number",min:"0",placeholder:"e.g. 50000 in pkr"},null,8,["modelValue","error"]),t(s,{label:"Teacher Contact No",modelValue:l(e).phone_number,"onUpdate:modelValue":o[9]||(o[9]=r=>l(e).phone_number=r),error:l(e).errors.phone_number,required:"",placeholder:"e.g. 03001234567 or +923001234567"},null,8,["modelValue","error"]),t(s,{label:"Date of Joining",modelValue:l(e).date_of_joining,"onUpdate:modelValue":o[10]||(o[10]=r=>l(e).date_of_joining=r),error:l(e).errors.date_of_joining,required:"",type:"date",placeholder:"mm/dd/yyyy"},null,8,["modelValue","error"]),t(s,{label:"Current Experience in Years",modelValue:l(e).experience_years,"onUpdate:modelValue":o[11]||(o[11]=r=>l(e).experience_years=r),error:l(e).errors.experience_years,type:"number",min:"0",max:"99",placeholder:"e.g. 5"},null,8,["modelValue","error"]),m.value.length?(b(),f(u,{key:0,label:"School",modelValue:l(e).school_id,"onUpdate:modelValue":o[12]||(o[12]=r=>l(e).school_id=r),error:l(e).errors.school_id,required:"",options:m.value.map(r=>({label:r.name,value:r.id}))},null,8,["modelValue","error","options"])):$("",!0),S.value.length?(b(),f(u,{key:1,label:"Assign Class",modelValue:l(e).class_id,"onUpdate:modelValue":o[13]||(o[13]=r=>l(e).class_id=r),error:l(e).errors.class_id,required:"",options:S.value.map(r=>({label:r.name,value:r.id}))},null,8,["modelValue","error","options"])):$("",!0),i("div",oe,[t(Z,{label:"Profile Photo (optional)",modelValue:l(e).profile_photo,"onUpdate:modelValue":o[14]||(o[14]=r=>l(e).profile_photo=r),error:l(e).errors.profile_photo,required:!1},null,8,["modelValue","error"])])]),i("div",ae,[t(R,{variant:"outline",type:"button",onClick:W},{default:h(()=>o[15]||(o[15]=[B("Cancel")])),_:1,__:[15]}),t(R,{variant:"default",type:"submit",disabled:l(e).processing},{default:h(()=>o[16]||(o[16]=[B("Update Teacher")])),_:1,__:[16]},8,["disabled"])])],32)])]),_:1}))}});export{ve as default};
