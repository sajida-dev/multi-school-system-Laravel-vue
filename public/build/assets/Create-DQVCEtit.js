import{d as P,L as $,c as i,s as j,r as m,x as z,H as F,b as n,o as d,e as y,f as s,g as a,u as e,h as I,p as H,i as S,z as p,j as g,k as W,A as G,P as J,t as L,_ as U,l as C,W as q}from"./app-0hD9jktS.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_OfVMdc.js";import{a as t,_ as c}from"./SelectInput-C8qFFp1m.js";import{_ as Y}from"./FileInput-kSoIAmJU.js";import{u as K}from"./school-SWVnhMs_.js";import{E as Q}from"./eye-Dtz9j6o0.js";import{E as X}from"./eye-off-B84CHv0x.js";import"./RovingFocusGroup-BrsbekXI.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DLhJV-ve.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DV00-4L5.js";import"./building-2-0J7JWYjO.js";import"./users-CQiJNf1m.js";import"./chevron-down-Bc9-FnA7.js";import"./check-DytFQTDT.js";import"./Label.vue_vue_type_script_setup_true_lang-CLv8w6I-.js";import"./Input.vue_vue_type_script_setup_true_lang-ByoFr_iA.js";import"./InputError.vue_vue_type_script_setup_true_lang-BnFbo3YU.js";const Z={class:"max-w-4xl mx-auto w-full px-2 sm:px-4 md:px-0 py-8"},ee={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},re={class:"relative"},le={class:"relative"},oe=["type"],ae={key:0,class:"text-xs text-red-500 mt-1"},se={key:0,class:"md:col-span-3"},te={class:"md:col-span-3"},de={class:"mt-8 flex gap-2 justify-end"},Se=P({__name:"Create",setup(ie){const h=K(),{schools:v,selectedSchool:T,classes:V,sections:x}=$(h),M=i(()=>Array.isArray(v.value)?v.value:[]),_=i(()=>Array.isArray(V.value)?V.value:[]);i(()=>Array.isArray(x.value)?x.value:[]);const w=i(()=>T.value),f=j(),N=m(f.props.roles||[]),b=m(f.props.hasRoles||!1),E=m(f.props.selectedSchoolId||null),u=m(!1),r=z({profile_photo:null,name:"",email:"",username:"",password:"",cnic:"",gender:"",marital_status:"",role_id:"",dob:"",salary:"",phone_number:"",date_of_joining:"",experience_years:"",school_id:E.value||"",class_id:""}),R=[{title:"Dashboard",href:"/"},{title:"Teachers",href:"/teachers"},{title:"Add Teacher",href:"/teachers/create"}],k=i(()=>w.value?Array.isArray(_.value)?_.value.filter(A=>{var l,o;return((l=A.pivot)==null?void 0:l.school_id)==((o=w.value)==null?void 0:o.id)}):[]:[]);F(()=>{M.value.length||h.fetchSchools()});function B(){r.post("/teachers",{forceFormData:!0,onSuccess:()=>{q.visit("/teachers"),C.success("Teacher added successfully")},onError:()=>{C.error("Failed to add teacher. Please check the form for errors.")},onFinish:()=>{r.reset("password","profile_photo")}})}function D(){q.visit("/teachers")}return(A,l)=>(d(),n(O,{breadcrumbs:R},{default:y(()=>[s(e(I),{title:"Add Teacher"}),a("div",Z,[l[20]||(l[20]=a("h1",{class:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100"},"Add New Teacher",-1)),a("form",{onSubmit:H(B,["prevent"]),class:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-700 rounded-lg shadow-lg p-6"},[a("div",ee,[s(t,{label:"Teacher Name",modelValue:e(r).name,"onUpdate:modelValue":l[0]||(l[0]=o=>e(r).name=o),error:e(r).errors.name,required:"",placeholder:"e.g. Ahmed Ali"},null,8,["modelValue","error"]),s(t,{label:"Teacher CNIC",modelValue:e(r).cnic,"onUpdate:modelValue":l[1]||(l[1]=o=>e(r).cnic=o),error:e(r).errors.cnic,required:"",placeholder:"e.g. 12345-1234567-1"},null,8,["modelValue","error"]),s(t,{label:"Username",modelValue:e(r).username,"onUpdate:modelValue":l[2]||(l[2]=o=>e(r).username=o),error:e(r).errors.username,required:"",placeholder:"e.g. teacher"},null,8,["modelValue","error"]),s(t,{label:"Email",modelValue:e(r).email,"onUpdate:modelValue":l[3]||(l[3]=o=>e(r).email=o),error:e(r).errors.email,required:"",type:"email",placeholder:"e.g. teacher@email.com"},null,8,["modelValue","error"]),a("div",re,[l[16]||(l[16]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[g(" Password "),a("span",{class:"text-red-500"},"*")],-1)),a("div",le,[W(a("input",{"onUpdate:modelValue":l[4]||(l[4]=o=>e(r).password=o),type:u.value?"text":"password",class:G(["w-full px-3 py-2 pr-10 rounded-lg border bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-colors",e(r).errors.password?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-neutral-600"]),placeholder:"At least 8 characters, including uppercase, lowercase, number, and special character (@$!%*#?&^_-)"},null,10,oe),[[J,e(r).password]]),a("button",{type:"button",onClick:l[5]||(l[5]=o=>u.value=!u.value),class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[u.value?(d(),n(e(X),{key:1,class:"w-4 h-4"})):(d(),n(e(Q),{key:0,class:"w-4 h-4"}))])]),e(r).errors.password?(d(),S("div",ae,L(e(r).errors.password),1)):p("",!0)]),s(c,{label:"Gender",modelValue:e(r).gender,"onUpdate:modelValue":l[6]||(l[6]=o=>e(r).gender=o),error:e(r).errors.gender,required:"",options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}]},null,8,["modelValue","error"]),s(c,{label:"Marital Status",modelValue:e(r).marital_status,"onUpdate:modelValue":l[7]||(l[7]=o=>e(r).marital_status=o),error:e(r).errors.marital_status,required:"",options:[{label:"Single",value:"Single"},{label:"Married",value:"Married"}]},null,8,["modelValue","error"]),b.value?p("",!0):(d(),S("div",se,l[17]||(l[17]=[a("div",{class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4"},[a("div",{class:"flex"},[a("div",{class:"flex-shrink-0"},[a("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),a("div",{class:"ml-3"},[a("h3",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"}," No roles available for this school "),a("div",{class:"mt-2 text-sm text-yellow-700 dark:text-yellow-300"},[a("p",null,"There are no teacher or principal roles configured for the selected school. Please contact the administrator to set up roles before creating teachers. ")])])])],-1)]))),b.value?(d(),n(c,{key:1,label:"Select Role",modelValue:e(r).role_id,"onUpdate:modelValue":l[8]||(l[8]=o=>e(r).role_id=o),error:e(r).errors.role_id,required:"",options:N.value.map(o=>({label:o.name.charAt(0).toUpperCase()+o.name.slice(1),value:o.id}))},null,8,["modelValue","error","options"])):p("",!0),s(t,{label:"Date of Birth",modelValue:e(r).dob,"onUpdate:modelValue":l[9]||(l[9]=o=>e(r).dob=o),error:e(r).errors.dob,required:"",type:"date",placeholder:"mm/dd/yyyy"},null,8,["modelValue","error"]),s(t,{label:"Salary",modelValue:e(r).salary,"onUpdate:modelValue":l[10]||(l[10]=o=>e(r).salary=o),error:e(r).errors.salary,required:"",type:"number",min:"0",placeholder:"e.g. 50000"},null,8,["modelValue","error"]),s(t,{label:"Teacher Contact No",modelValue:e(r).phone_number,"onUpdate:modelValue":l[11]||(l[11]=o=>e(r).phone_number=o),error:e(r).errors.phone_number,required:"",placeholder:"e.g. 03001234567 or +923001234567"},null,8,["modelValue","error"]),s(t,{label:"Date of Joining",modelValue:e(r).date_of_joining,"onUpdate:modelValue":l[12]||(l[12]=o=>e(r).date_of_joining=o),error:e(r).errors.date_of_joining,required:"",type:"date",placeholder:"mm/dd/yyyy"},null,8,["modelValue","error"]),s(t,{label:"Current Experience in Years",modelValue:e(r).experience_years,"onUpdate:modelValue":l[13]||(l[13]=o=>e(r).experience_years=o),error:e(r).errors.experience_years,type:"number",min:"0",max:"99",placeholder:"e.g. 5"},null,8,["modelValue","error"]),k.value.length?(d(),n(c,{key:2,label:"Assign Class",modelValue:e(r).class_id,"onUpdate:modelValue":l[14]||(l[14]=o=>e(r).class_id=o),error:e(r).errors.class_id,required:"",options:k.value.map(o=>({label:o.name,value:o.id}))},null,8,["modelValue","error","options"])):p("",!0),a("div",te,[s(Y,{label:"Profile Photo (optional)",modelValue:e(r).profile_photo,"onUpdate:modelValue":l[15]||(l[15]=o=>e(r).profile_photo=o),error:e(r).errors.profile_photo,required:!1},null,8,["modelValue","error"])])]),a("div",de,[s(U,{variant:"outline",type:"button",onClick:D},{default:y(()=>l[18]||(l[18]=[g("Cancel")])),_:1,__:[18]}),s(U,{variant:"default",type:"submit",disabled:e(r).processing||!b.value},{default:y(()=>l[19]||(l[19]=[g("Add Teacher")])),_:1,__:[19]},8,["disabled"])])],32)])]),_:1}))}});export{Se as default};
