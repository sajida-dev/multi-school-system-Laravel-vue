import{d as P,s as U,r as c,c as W,L as z,w as $,H as V,l as h,y as F,b as j,o as f,e as a,f as r,g as d,u as p,h as G,k as _,i as b,t as H,_ as S,W as g,j as k,N as J,x as K}from"./app-oDzFbDpS.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-B8xcv65_.js";import{_ as Q}from"./BaseDataTable.vue_vue_type_style_index_0_lang-dE9UHpEE.js";import{u as R}from"./school-T4gwIvXC.js";import{_ as N}from"./Icon.vue_vue_type_script_setup_true_lang-CktM08l_.js";import{a as X,_ as Y}from"./AvatarImage.vue_vue_type_script_setup_true_lang-DPNLz3sn.js";import{E as Z}from"./eye-DjBiqAnr.js";import"./RovingFocusGroup-CLnOwjDo.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cob2K5o9.js";import"./building-2-Dp0U14zc.js";import"./users-DDnJbTSp.js";import"./chevron-down-SN-issHr.js";import"./check-CEIiCWnz.js";import"./loader-circle-Dd3mNCCo.js";import"./target-BvkpxWi2.js";import"./triangle-alert-DX_7JuLF.js";import"./refresh-cw-CWAu1Of8.js";import"./save-BhC_gGhx.js";import"./plus-DaPcSaFA.js";import"./arrow-right-Dpm9A9Fy.js";import"./arrow-left-DCJF3lDn.js";import"./eye-off-ByIEJSqi.js";import"./shield-CQ-AXaLs.js";import"./square-pen-D5JRiJpv.js";import"./info-Cu4eEvQq.js";import"./calendar-NzJ3-Hzp.js";import"./house-CZga5bkn.js";import"./book-open-NJHJ4pEX.js";import"./trash-Byk8sBRk.js";const ee={class:"max-w-6xl mx-auto w-full px-2 sm:px-4 md:px-0 py-8"},te={class:"flex items-center justify-center h-full"},oe=["onClick"],se=["onClick"],le=["onClick"],ae={class:"flex gap-2 justify-end"},Oe=P({__name:"Index",setup(re){const A=[{title:"Schools",href:"/schools"}],{props:l}=U(),n=c(l.schools),E=[{text:"ID",value:"id"},{text:"Name",value:"name"},{text:"Address",value:"address"},{text:"Contact",value:"contact"},{text:"Actions",value:"actions",sortable:!1,slotName:"item-actions"}],B=W(()=>{var e;return(Array.isArray((e=n.value)==null?void 0:e.data)?n.value.data:[]).map(o=>({id:o.id!=null?o.id.toString():"",name:o.name!=null?o.name.toString():"",address:o.address!=null?o.address.toString():"",contact:o.contact!=null?o.contact.toString():""}))}),u=c(l.schools?l.schools.total:0),x=c(!1),v=c({page:1,rowsPerPage:10,sortBy:"",sortType:"",search:"",filters:{}}),m=c(!1),i=c(null);c(null);const I=R(),{schools:y}=z(I),w=()=>{x.value=!0,g.get(route("schools.index"),v.value,{preserveState:!0,replace:!0,onSuccess:t=>{n.value=t.props.schools,u.value=t.props.schools.total,x.value=!1}})};$(v,w,{deep:!0}),V(w);const T=()=>g.get(route("schools.create")),O=t=>{g.get(route("schools.edit",t))};function q(t){g.get(route("schools.show",t))}const M=t=>{i.value=t,m.value=!0},C=()=>{i.value&&(K({id:i.value}).delete(route("schools.destroy",i.value),{preserveScroll:!0,onSuccess:()=>{h.success("School deleted successfully."),n.value&&(n.value.data=n.value.data.filter(e=>e.id!=i.value),u.value=Math.max(0,u.value-1));const t=y.value.findIndex(e=>e.id==i.value);t!==-1&&y.value.splice(t,1),i.value=null},onError:()=>h.error("Failed to delete school!")}),m.value=!1)};return V(()=>{u.value=l.schools?l.schools.total:0,l.success&&h.success(l.success),l.error&&h.error(l.error)}),$(()=>l.schools,t=>{n.value=t,u.value=t?t.total:0}),(t,e)=>{const o=F("can");return f(),j(L,{breadcrumbs:A},{default:a(()=>[r(p(G),{title:"Schools"}),d("div",ee,[e[4]||(e[4]=d("h1",{class:"text-2xl font-bold mb-6 text-neutral-900 dark:text-neutral-100"},"Schools",-1)),r(Q,{headers:E,items:B.value,loading:x.value,"server-options":v.value,"server-items-length":u.value,"onUpdate:serverOptions":e[0]||(e[0]=s=>Object.assign(v.value,s)),"table-class":"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-md hover:shadow-lg transition-all","row-class":"hover:bg-purple-50 dark:hover:bg-purple-900/60 transition cursor-pointer border-b border-neutral-100 dark:border-neutral-800"},{toolbar:a(()=>[_((f(),j(p(S),{variant:"default",size:"lg",class:"mr-2",onClick:T},{default:a(()=>e[3]||(e[3]=[k("Add School")])),_:1,__:[3]})),[[o,"create-schools"]])]),"item-name":a(s=>[d("div",null,[d("span",null,H(s.name),1)])]),"item-id":a(s=>[d("div",te,[r(X,{class:"w-8 h-8"},{default:a(()=>[r(Y,{src:s.logo??"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSVJvdr9q2sYXdV5Qn8j47CV7i1nDNK-pIew&s",alt:s.name},null,8,["src","alt"])]),_:2},1024)])]),"item-actions":a(s=>[_((f(),b("button",{class:"inline-flex items-center justify-center rounded-full p-2 text-neutral-500 focus:outline-none focus:ring-2 focus:ring-neutral-400 mr-1",onClick:D=>q(s.id),"aria-label":"View School",title:"View School"},[r(p(Z),{class:"w-5 h-5"})],8,oe)),[[o,"read-schools"]]),_((f(),b("button",{class:"inline-flex items-center justify-center rounded-full p-2 text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400 mr-1",onClick:D=>O(s.id),"aria-label":"Edit School",title:"Edit School"},[r(N,{name:"edit",class:"w-5 h-5"})],8,se)),[[o,"edit-schools"]]),_((f(),b("button",{class:"inline-flex items-center justify-center rounded-full p-2 text-red-500 focus:outline-none focus:ring-2 focus:ring-red-400",onClick:D=>M(s.id),"aria-label":"Delete School",title:"Delete School"},[r(N,{name:"trash",class:"w-5 h-5"})],8,le)),[[o,"delete-schools"]])]),_:1},8,["items","loading","server-options","server-items-length"])]),r(J,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),title:"Delete School",message:"Are you sure you want to delete this school? This action cannot be undone.","confirm-text":"Delete","cancel-text":"Cancel",onConfirm:C},{footer:a(()=>[d("div",ae,[r(p(S),{variant:"outline",onClick:e[1]||(e[1]=s=>m.value=!1)},{default:a(()=>e[5]||(e[5]=[k("Cancel")])),_:1,__:[5]}),r(p(S),{variant:"destructive",onClick:C},{default:a(()=>e[6]||(e[6]=[k("Delete")])),_:1,__:[6]})])]),_:1},8,["modelValue"])]),_:1})}}});export{Oe as default};
